## Handler

1. urllib.request.urlopen(url)：不能定制请求头
2. urllib.request.Request(url,headers,data)：可以定制请求头
3. Handler：定制更高级的请求头（随着业务逻辑的复杂 请求对象的定制已经满足不了我们的需求（动态cookie和代理不能使用请求对象的定制）
```python
import urllib.request
url = 'http://www.baidu.com'

headers = {
    'User-Agent':'Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:103.0) Gecko/20100101 Firefox/103.0'
}
  
request = urllib.request.Request(url = url,headers = headers)
  
# handler build_opener open

# （1）获取hanlder对象
handler = urllib.request.HTTPHandler()

# （2）获取opener对象
opener = urllib.request.build_opener(handler)

# (3) 调用open方法
response = opener.open(request)
content = response.read().decode('utf-8')
print(content)
```
## 代理服务器
1. 代理的常用功能?
  突破自身IP访问限制，访问国外站点。
  访问一些单位或团体内部资源
  提高访问速度
  隐藏真实IP
2. 代码配置代理
  创建Reuqest对象
  创建ProxyHandler对象
  用handler对象创建opener对象
  使用opener.open函数发送请求
```python
# 请求对象的定制
request = urllib.request.Request(url=url, headers=headers)

# 模拟浏览器访问服务器
# response = urllib.request.urlopen(request)

proxies = {
'http': '118.24.219.151:16817'
}

# handler build_opener open

handler = urllib.request.ProxyHandler(proxies=proxies)
opener = urllib.request.build_opener(handler)
response = opener.open(request)

# 获取响应的信息
content = response.read().decode('utf-8')

# 保存
with open('daili.html', 'w', encoding='utf-8')as fp:
    fp.write(content)
```

扩展：
1. 代理池
```python
proxies_pool = [
{'http':'118.24.219.151:16817'},
{'http':'118.24.219.151:16817'},
]

import random
proxies = random.choice(proxies_pool)
```
2. 快代理
