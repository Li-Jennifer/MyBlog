---
title: Numpy：切片和索引
date: 2022-08-21 15:08:20
permalink: /pages/a448e7/
categories:
  - 基础
  - Numpy
tags:
  - 
author: 
  name: Jennifer
  link: https://github.com/Li-Jennifer
---
# 切片和索引

## 1.一维数组
```python
ar1 = np.arange(10)
ar2 = ar1[2:7:2]   # array([2, 4, 6])
```
 为什么切片和区间会忽略最后一个元素?
计算机科学家edsger w.dijkstra(艾兹格·W·迪科斯彻)，delattr这一风格的解释应该是比较好的：
- 当只有最后一个位置信息时，我们可以快速看出切片和区间里有几个元素：range(3)和my_list[:3]
-   当起始位置信息都可见时，我们可以快速计算出切片和区间的长度，用有一个数减去第一个下表(stop-start)即可
-   这样做也让我们可以利用任意一个下标把序列分割成不重叠的两部分，只要写成my_list[:x]和my_list[x:]就可以了
## 2.多维数组
```python
ar4_5 = np.arange(20).reshape(4,5)

array([[ 0,  1,  2,  3,  4],
       [ 5,  6,  7,  8,  9],
       [10, 11, 12, 13, 14],
       [15, 16, 17, 18, 19]])

# 1. 一行
ar4_5[2]    # array([10, 11, 12, 13, 14])

# 2. 某个
ar4_5[2][2]  # 12

# 3.需要取得第二列数据
ar4_5[...,1]  # array([ 1,  6, 11, 16])

# 4.返回第二列后的所有项
ar4_5[...,1:]

# 5.返回2行3列数据
ar4_5[1][2] # 7

```

## 3.整数数组

[https://www.bilibili.com/video/BV1tr4y1B7oQ](https://www.bilibili.com/video/BV1tr4y1B7oQ?p=16)

```python
b = np.array([[ 0, 1, 2],
              [ 3, 4, 5],
              [ 6, 7, 8],
              [ 9,10,11]])

a = b[[0,0,3,3],[0,2,0,2]]  # (0,0)(0,2) (3,0) (3,2)

r = np.array([[0,0] ,[3,3]]).reshape(4)
l = np.array([[0,2] ,[0,2]]).reshape(4)
s = b[r,l].reshape((2,2))
s

# array([[ 0,  2],
#       [ 9, 11]])
```

### 创建 8x8的国际象棋棋盘矩阵
挺有意思的
```python
Z = np.zeros((8, 8), dtype=int)
Z[1::2,::2] = 1
Z[::2,1::2] = 1

array([[0, 1, 0, 1, 0, 1, 0, 1],
       [1, 0, 1, 0, 1, 0, 1, 0],
       [0, 1, 0, 1, 0, 1, 0, 1],
       [1, 0, 1, 0, 1, 0, 1, 0],
       [0, 1, 0, 1, 0, 1, 0, 1],
       [1, 0, 1, 0, 1, 0, 1, 0],
       [0, 1, 0, 1, 0, 1, 0, 1],
       [1, 0, 1, 0, 1, 0, 1, 0]])
```
## 4.布尔数组
```python
x = np.array([[ 0,  1,  2],[ 3,  4,  5],[ 6,  7,  8],[ 9, 10, 11]])

# 1. 大于6
x[x>6]  # array([ 7,  8,  9, 10, 11])

# 2. 奇数
x[x%2 == 1]  # array([ 1,  3,  5,  7,  9, 11])

# 3.修改奇数值修改为-1
x[x%2 == 1] = -1  
```
### 筛选出指定区间内数据
- & 和
- | 或 
```python
# 以上x中大于4并且小于9的数据
x[(x>4) & (x<9)]
```

### True和False的形式表示需要和不需要的数据
```python
a3_4 = np.arange(12).reshape((3,4))

row1 = np.array([False,True,True])
column1 = np.array([True,False,True,False])


a3_4[row1]

array([[ 4,  5,  6,  7],
       [ 8,  9, 10, 11]])

# 切片
a3_4[row1,column1]   # array([ 4, 10])
```

## 5. 广播机制

NumPy 设计了一种广播机制， 这种机制的核心是对形状较小的数组，在横向或纵向上进行一定次数的重复，使其与形状较大的数组拥有相同的维度。
![](attachments/截屏2022-08-21%20下午8.45.16.png)


![](attachments/Pasted%20image%2020220821204710.png)