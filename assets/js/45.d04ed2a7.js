(window.webpackJsonp=window.webpackJsonp||[]).push([[45],{368:function(s,n,a){"use strict";a.r(n);var e=a(3),t=Object(e.a)({},(function(){var s=this,n=s._self._c;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h2",{attrs:{id:"_1-生成6位数字随机验证码"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-生成6位数字随机验证码"}},[s._v("#")]),s._v(" 1. 生成6位数字随机验证码")]),s._v(" "),n("div",{staticClass:"language-python line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-python"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" random\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" string\n\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("num_code")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("length"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[s._v('"""\n    生成长度为length的数字随机验证码\n    :param length: 验证码长度\n    :return: 验证码\n    """')]),s._v("\n    \n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("''")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("join"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("random"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("choice"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("string"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("digits"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" i "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("range")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" length"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br")])]),n("h2",{attrs:{id:"_2-md5加密"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-md5加密"}},[s._v("#")]),s._v(" 2.md5加密")]),s._v(" "),n("div",{staticClass:"language-python line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-python"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v("  hashlib\n\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# md5加密")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("md5_encrypt")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("en_str"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[s._v('"""\n    使用md5二次加密生成32位的字符串\n    :param en_str: 需要加密的字符串\n    :return: 加密后的字符串\n    """')]),s._v("\n   \n    md5 "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" hashlib"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("md5"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 使用MD5加密模式")]),s._v("\n    md5"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("update"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("en_str"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("encode"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'utf-8'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 将参数字符串传入")]),s._v("\n    md5"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("update"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("md5"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("hexdigest"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("encode"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'utf-8'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# md5二次加密")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" md5"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("hexdigest"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br")])]),n("h2",{attrs:{id:"_3-生成唯一token"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-生成唯一token"}},[s._v("#")]),s._v(" 3. 生成唯一token")]),s._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",[n("code",[s._v('import uuid\nimport  hashlib\n\ndef only_token():\n    """\n    使用md5加密uuid生成唯一的32位token\n    :return: 加密后的字符串\n    """\nmd5 = hashlib.md5()  # 使用MD5加密模式\nmd5.update(str(uuid.uuid1()).encode(\'utf-8\'))  \nreturn md5.hexdigest()\n')])])]),n("h2",{attrs:{id:"_4、发送手机验证码"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4、发送手机验证码"}},[s._v("#")]),s._v(" 4、发送手机验证码")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("#验证码管理表\nclass AuthCode(models.Model):\n    name = models.CharField(max_length=10,default=None, null=True, blank=True,verbose_name='姓名')\n    phone = models.CharField(max_length=11, unique=True, verbose_name='手机号')\n    code = models.CharField(max_length=6,verbose_name='验证码')\n    purpose = models.IntegerField(default=0,verbose_name='用途:0->注册验证 1->找回密码 2->其它')\n    sendNum = models.IntegerField(default=0,verbose_name='发送次数')\n    isCanGet = models.BooleanField(default=0,verbose_name='0->可以获取,1->不可以获取')\n    recentlySendTime = models.DateTimeField(auto_now_add=True,verbose_name='最近一次发送时间')\n    creation_time = models.DateTimeField(auto_now=True, verbose_name='创建时间')\n\n    class Meta:\n        verbose_name = '手机验证码'\n        verbose_name_plural = verbose_name\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br")])]),n("h3",{attrs:{id:"实现逻辑"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#实现逻辑"}},[s._v("#")]),s._v(" 实现逻辑")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('import http.client\nimport urllib\n# 使用互亿无线\nhost = "106.ihuyi.com"\nsms_send_uri = "/webservice/sms.php?method=Submit"\n\n# 查看用户名 登录用户中心->验证码通知短信>产品总览->API接口信息->APIID\naccount = "你的用户名"\n# 查看密码 登录用户中心->验证码通知短信>产品总览->API接口信息->APIKEY\npassword = "你的密码"\n\n\ndef send_sms(text, mobile):\n    text = f"您的验证码是：{text}。请不要把验证码泄露给其他人。"\n    params = urllib.parse.urlencode(\n        {\'account\': account, \'password\': password, \'content\': text, \'mobile\': mobile, \'format\': \'json\'})\n    headers = {"Content-type": "application/x-www-form-urlencoded", "Accept": "text/plain"}\n    conn = http.client.HTTPConnection(host, port=80, timeout=30)\n    conn.request("POST", sms_send_uri, params, headers)\n    response = conn.getresponse()\n    response_str = response.read()\n    conn.close()\n    return response_str\n\n\nif __name__ == \'__main__\':\n    mobile = "手机号"\n    text = \'123122\'\n\n    print(json.loads(send_sms(text, mobile).decode(\'utf-8\')))\n\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br")])]),n("h2",{attrs:{id:"_5、生成二维码"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_5、生成二维码"}},[s._v("#")]),s._v(" 5、生成二维码")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('import qrcode\nimport io\n\ndef maker_qrcode(url):\n    """\n    生成二维码\n    :param url: 需要生成二维码的url\n    :return: 返回图片字节流\n    """\n    image = qrcode.make(url)  # 创建二维码片\n\n    buffer = io.BytesIO()\n    # 将图片内容丢入容器\n    image.save(buffer, \'png\')\n    # 返回容器内的字节\n    return buffer.getvalue()\n    \n或者\nfrom .settings import BASE_DIR\n\ndef create_qrcode(name, url):\n    """\n    生成机器扫码支付二维码\n    :param name: 图片名称\n    :param url: 支付路由\n    :return:\n    """\n    img = qrcode.make(url, border=0)  # 创建二维码片\n    save_path = BASE_DIR + \'/\' + name + \'.png\'\n    print(save_path)\n    img.save(save_path)\n    return img\n\n\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br")])]),n("h2",{attrs:{id:"_6-微信群发"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_6-微信群发"}},[s._v("#")]),s._v(" 6.微信群发")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("# coding=utf8\nimport itchat, time\n\nitchat.auto_login(True)\n\nSINCERE_WISH = u'祝%s新年快乐！'\n\nfriendList = itchat.get_friends(update=True)[35:]\ncount = 0\n\nfor  index,friend in enumerate(friendList):\n    print(index,friend['DisplayName'],friend['NickName'])\n    itchat.send(SINCERE_WISH % (friend['DisplayName']\n                                or friend['NickName']), friend['UserName'])\n    time.sleep(2)\n    print('备注名称',friend['DisplayName'],'昵称',friend['NickName'],'用户名',friend['UserName'])\n\nprint(\"----end----\")\n\n\"\"\"\n# 发送文本\nitchat.send('Hello, WeChat!')\n# 发送图片\nitchat.send_image('my_picture.png')\n# 发送视频\nitchat.send_video('my_video.mov')\n# 发送文件\nitchat.send_file('my_file.zip')\n\n\"\"\"\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br")])]),n("h2",{attrs:{id:"_7、微信自动回复"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_7、微信自动回复"}},[s._v("#")]),s._v(" 7、微信自动回复")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("# -*- coding=utf-8 -*-\nimport requests\nimport itchat\nimport random\n#图灵机器人\n#http://www.tuling123.com/member/robot/1380138/center/frame.jhtml?page=0&child=0获取apikey\nKEY = '你的KEY'\n\ndef get_response(msg):\n    apiUrl = 'http://www.tuling123.com/openapi/api'\n    data = {\n        'key'    : KEY,\n        'info'   : msg,\n        'userid' : 'wechat-robot',\n    }\n    try:\n        r = requests.post(apiUrl, data=data).json()\n        return r.get('text')\n    except:\n        return\n\n@itchat.msg_register(itchat.content.TEXT)\ndef tuling_reply(msg):\n    defaultReply = 'I received: ' + msg['Text']\n    robots=['','','']\n    reply = get_response(msg['Text'])+random.choice(robots)\n    return reply or defaultReply\n\nitchat.auto_login(enableCmdQR=False)\nitchat.run()\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br")])]),n("h2",{attrs:{id:"_8、提取django中model中的字段名变成字典、列表"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_8、提取django中model中的字段名变成字典、列表"}},[s._v("#")]),s._v(" 8、提取Django中model中的字段名变成字典、列表")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("import re\nt = \"\"\"\n    goods_id = models.IntegerField(verbose_name='商品编号')\n    label_code = models.CharField(max_length=20, verbose_name='商品标签')\n\"\"\"\n# 字典\nprint({k:None for k in re.findall('([a-z_A-Z]+)\\s=\\s',t)})\n# 列表\n# print([k for k in re.findall('([a-z_A-Z]+)\\s=\\s',t)])\n\n输出\n{'goods_id': None, 'lable_code': None}\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br")])]),n("h2",{attrs:{id:"_9、数据库中给表创建数据"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_9、数据库中给表创建数据"}},[s._v("#")]),s._v(" 9、数据库中给表创建数据")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("import pymysql\n\ndef createData(dataDict,tableName):\n    \"\"\"\n    给数据表创建数据\n    :param dataDict: 字典\n    :param tableName: 表名\n    :return: \n    \"\"\"\n    #连接数据库\n    conn = pymysql.connect(\n        host='192.168.0.188', #数据库所在地址URL\n        user='root', #用户名\n        password='123456', #密码\n        database='名称', #数据库名称\n        port=3306,  #端口号\n        charset='utf8'\n    )\n    #拿到查询游标\n    cursor = conn.cursor()\n    clos,value = zip(*dataDict.items())\n    sql = \"INSERT INTO `%s`(%s) VALUES (%s)\" % (tableName,\n                                                ','.join(clos),\n                                                ','.join(['%s'] * len(value))\n                                                )\n    print(sql)\n    cursor.execute(sql, value)\n    conn.commit()\n    cursor.close()\n    conn.close()\n    print('Done')\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br")])]),n("h2",{attrs:{id:"_10-捕捉异常"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_10-捕捉异常"}},[s._v("#")]),s._v(" 10.捕捉异常")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("try:\n    pass\nexcept 异常类型 as e:\n    pass\nfinally:\n    pass\n    \n    \n异常类型\nException  全部异常\nAttributeError 试图访问一个对象没有的属性，比如foo.x，但是foo没有属性x\nIOError 输入/输出异常；基本上是无法打开文件\nImportError 无法引入模块或包；基本上是路径问题或名称错误\nIndentationError 语法错误（的子类） ；代码没有正确对齐\nIndexError 下标索引超出序列边界，比如当x只有三个元素，却试图访问x[5]\nKeyError 试图访问字典里不存在的键\nKeyboardInterrupt Ctrl+C被按下\nNameError 使用一个还未被赋予对象的变量\nSyntaxError Python代码非法，代码不能编译(个人认为这是语法错误，写错了）\nTypeError 传入对象类型与要求的不符合\nUnboundLocalError 试图访问一个还未被设置的局部变量，基本上是由于另有一个同名的全局变量，导致你以为正在访问它\nValueError 传入一个调用者不期望的值，即使值的类型是正确的\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br")])]),n("h2",{attrs:{id:"_11、获取当前时间"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_11、获取当前时间"}},[s._v("#")]),s._v(" 11、获取当前时间")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("import datetime\n\ncurrent_time = str(datetime.datetime.now())[:19]\nprint(current_time)\n\n输出格式如：2018-10-20 10:01:43\nlocal_time = time.strftime('%Y%m%d%H%M%S', time.localtime(time.time()))\nprint(local_time)\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br")])]),n("h2",{attrs:{id:"_12、订单编号"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_12、订单编号"}},[s._v("#")]),s._v(" 12、订单编号")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("from random import Random\nimport time\n\ndef random_str(randomlength=8):\n    str = ''\n    chars = 'AaBbCcDdEeFfGgHhIiJjKkLlMmNnOoPpQqRrSsTtUuVvWwXxYyZz0123456789'\n    length = len(chars) - 1\n    random = Random()\n    for i in range(randomlength):\n        str+=chars[random.randint(0, length)]\n    return str\n\ndef order_num():\n    \"\"\"\n    生成付款订单号\n    :return:\n    \"\"\"\n    local_time = time.strftime('%Y%m%d%H%M%S', time.localtime(time.time()))\n    result = local_time + random_str(5)\n    return result\n\n\nprint(order_num())\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br")])]),n("h2",{attrs:{id:"_13、mysql自动填写当前时间"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_13、mysql自动填写当前时间"}},[s._v("#")]),s._v(" 13、mysql自动填写当前时间")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("CURRENT_TIMESTAMP\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[n("img",{attrs:{src:"https://img-blog.csdnimg.cn/20190312172747658.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xtX2lzX2Rj,size_16,color_FFFFFF,t_70",alt:"在这里插入图片描述"}})]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("为表添加索引\n\nALTER table tableName ADD INDEX indexName(columnName)\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("h2",{attrs:{id:"_14、drf动态过滤查询"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_14、drf动态过滤查询"}},[s._v("#")]),s._v(" 14、drf动态过滤查询")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("# page.py\n\nfrom rest_framework.pagination import PageNumberPagination\n\n\nclass UserPagination(PageNumberPagination):\n    \"\"\"用户分页器\"\"\"\n    page_size = 10  # 默认的页面数据数量\n    page_query_param = 'page'  # 定制取数据页码key \n    page_size_query_param = 'page_size'  # 默认取数据页码key \n    max_page_size = 15   # 数据每页取值的最大上限\n\n\n\n# serializers.py\n\nfrom rest_framework import serializers\n\nfrom user.models import UserInfo\n\nclass UserSerializers(serializers.ModelSerializer):\n    \"\"\"用户收货地址\"\"\"\n\n    class Meta:\n        model = UserInfo\n\t    # 所有字段\n        #fields = '__all__'\n        fields = ['name', 'code', 'title',  'province', 'city',\n                    'quxian', 'address', 'code__gte', 'code__lte']\n        # 显示外键\n        depth = 2\n\n\n# views.py\nclass MachineViews(APIView):\n    def get(self, request, *args, **kwargs):\n        # 从前端获取出来的过滤参数，解析成字典传进filter()函数中\n        # 动态过滤，\n        kwargs = {}\n        # 表中的字段名\n        columns = ['name', 'code', 'title',  'province', 'city',\n                    'quxian', 'address', 'code__gte', 'code__lte']\n        for k, v in request.query_params.items():\n            if k not in columns:\n                return Response('参数不对', status=status.HTTP_400_BAD_REQUEST)\n\t\t\tif v:\n            \tkwargs[k] = v\n\n        users = UserInfo.objects.filter(**kwargs)\n        page = UserPagination()\n        page_goods_list = page.paginate_queryset(users, self.request, self)\n        ser = UserSerializers(page_goods_list, many=True)\n        return page.get_paginated_response(ser.data)\n        \n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br"),n("span",{staticClass:"line-number"},[s._v("44")]),n("br"),n("span",{staticClass:"line-number"},[s._v("45")]),n("br"),n("span",{staticClass:"line-number"},[s._v("46")]),n("br"),n("span",{staticClass:"line-number"},[s._v("47")]),n("br"),n("span",{staticClass:"line-number"},[s._v("48")]),n("br"),n("span",{staticClass:"line-number"},[s._v("49")]),n("br"),n("span",{staticClass:"line-number"},[s._v("50")]),n("br"),n("span",{staticClass:"line-number"},[s._v("51")]),n("br"),n("span",{staticClass:"line-number"},[s._v("52")]),n("br"),n("span",{staticClass:"line-number"},[s._v("53")]),n("br"),n("span",{staticClass:"line-number"},[s._v("54")]),n("br"),n("span",{staticClass:"line-number"},[s._v("55")]),n("br")])]),n("h2",{attrs:{id:"_15、linux后台运行python程序"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_15、linux后台运行python程序"}},[s._v("#")]),s._v(" 15、linux后台运行python程序")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("nohup /home/project_venv/user/bin/python3 -u /home/user/user_server.py >> /home/user/user.log 2>&1 &   \n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("h2",{attrs:{id:"_16、追加外键"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_16、追加外键"}},[s._v("#")]),s._v(" 16、追加外键")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("ALTER TABLE tb_commentPhoto ADD CONSTRAINT FK_comment_phone\nFOREIGN KEY tb_goodsComment(id) REFERENCES tb_commentPhoto(comment_id);\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("h2",{attrs:{id:"_17、写-读csv文件-查看是否存在-若存在就从csv中删除"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_17、写-读csv文件-查看是否存在-若存在就从csv中删除"}},[s._v("#")]),s._v(" 17、写/读CSV文件，查看是否存在，若存在就从csv中删除")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("import csv\nimport random\nimport string\n\n\ndef create_invite_code(random_code_pool=None, length=6, num=10, is_append=False):\n    \"\"\"\n    创建随机邀请码,并写入txt文件\n    :param: random_code_pool 随机邀请码\n    :param: length 邀请码长度\n    :param: num 邀请码个数\n    :param: is_append True追加,False 覆盖\n    :return:\n    \"\"\"\n    if not random_code_pool:\n        code_pool = string.ascii_uppercase + string.digits\n        random_code_pool = []\n        for i in range(num):\n            s = ''\n            for _ in range(length):\n                s += random.choice(code_pool)\n            if s and s not in random_code_pool:\n                random_code_pool.append(s)\n\n    # 写入方法。是追加还是覆盖\n    write_method = 'a+' if is_append else 'w'\n    # 写入文件\n    with open('./invite_code.csv', write_method, newline='') as f:\n        writer = csv.writer(f)\n        for rowData in random_code_pool:\n            # 按行写入\n            writer.writerow((rowData,))\n\n\ndef check_invite_code(code):\n    \"\"\"\n    查看邀请码是否存在txt文件中，\n    若存在就返回True，并在txt文件中删除\n    若不存在就返回False\n    :param code:\n    :return:\n    \"\"\"\n    code_pool = []\n    with open('./invite_code.csv', 'r', encoding='utf-8',errors='ignore') as f:\n        allFileInfo = csv.reader(f)\n        for row in allFileInfo:\n            code_pool.append(row[0])\n\n    if code in code_pool:\n        # 删除查询的code\n        code_pool.pop(code_pool.index(code))\n\n        # 重新写入文件\n        create_invite_code(code_pool,is_append=False)\n        return True\n    return False\n\n\nif __name__ == '__main__':\n    # create_invite_code(length=9,num=100)\n    print(check_invite_code('WJ4PSTJG2'))\n\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br"),n("span",{staticClass:"line-number"},[s._v("44")]),n("br"),n("span",{staticClass:"line-number"},[s._v("45")]),n("br"),n("span",{staticClass:"line-number"},[s._v("46")]),n("br"),n("span",{staticClass:"line-number"},[s._v("47")]),n("br"),n("span",{staticClass:"line-number"},[s._v("48")]),n("br"),n("span",{staticClass:"line-number"},[s._v("49")]),n("br"),n("span",{staticClass:"line-number"},[s._v("50")]),n("br"),n("span",{staticClass:"line-number"},[s._v("51")]),n("br"),n("span",{staticClass:"line-number"},[s._v("52")]),n("br"),n("span",{staticClass:"line-number"},[s._v("53")]),n("br"),n("span",{staticClass:"line-number"},[s._v("54")]),n("br"),n("span",{staticClass:"line-number"},[s._v("55")]),n("br"),n("span",{staticClass:"line-number"},[s._v("56")]),n("br"),n("span",{staticClass:"line-number"},[s._v("57")]),n("br"),n("span",{staticClass:"line-number"},[s._v("58")]),n("br"),n("span",{staticClass:"line-number"},[s._v("59")]),n("br"),n("span",{staticClass:"line-number"},[s._v("60")]),n("br"),n("span",{staticClass:"line-number"},[s._v("61")]),n("br"),n("span",{staticClass:"line-number"},[s._v("62")]),n("br"),n("span",{staticClass:"line-number"},[s._v("63")]),n("br")])]),n("h2",{attrs:{id:"_18、django中从request获取访问路径"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_18、django中从request获取访问路径"}},[s._v("#")]),s._v(" 18、django中从request获取访问路径")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("print('获取相对路径', request.get_full_path())\nprint('获取绝对路径', request.build_absolute_uri())\nprint(request.build_absolute_uri('?'))\nprint(request.build_absolute_uri('/')[:-1].strip(\"/\"))\nprint(request.build_absolute_uri('/').strip(\"/\"))\nprint(request.build_absolute_uri('/'))\nprint('----------')\nprint(request.META['HTTP_HOST'])\nprint(request.META['PATH_INFO'])\nprint(request.META['QUERY_STRING'])\niphost = request.META.get('REMOTE_ADDR', '')  # 获取访问来源IP\n\n\n# 输出如：\n获取相对路径 /QRcode/?d=1\n获取绝对路径 http://127.0.0.1:8000/QRcode/?d=1\nhttp://127.0.0.1:8000/QRcode/\nhttp://127.0.0.1:8000\nhttp://127.0.0.1:8000\nhttp://127.0.0.1:8000/\n----------\n127.0.0.1:8000\n/QRcode/\nd=1\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br")])]),n("h2",{attrs:{id:"_19、django收集静态文件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_19、django收集静态文件"}},[s._v("#")]),s._v(" 19、Django收集静态文件")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("先在项目根目录下创建一个static文件夹\n然后在settings.py中设置\nSTATIC_ROOT = os.path.join(BASE_DIR, 'static')\n最后执行下面的命令：\npython manage.py collectstatic\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("h2",{attrs:{id:"_20、xadmin插件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_20、xadmin插件"}},[s._v("#")]),s._v(" 20、xadmin插件")]),s._v(" "),n("p",[s._v("https://www.cnblogs.com/lanqie/p/8340215.html")]),s._v(" "),n("h2",{attrs:{id:"_21、uwsgi自动重启"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_21、uwsgi自动重启"}},[s._v("#")]),s._v(" 21、uwsgi自动重启")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("[uwsgi]\n# 使用nginx连接时 使用\nsocket=0.0.0.0:2019\n# 直接作为web服务器使用\n#http=0.0.0.1:8000\n# 配置工程目录\nchdir=/home/user\n# 配置项目的wsgi目录。相对于工程目录\nwsgi-file=user/wsgi.py\nvirtualenv=/home/project_venv/user\n#配置进程，线程信息\nprocesses=1\nthreads=1\nenable-threads=True\nmaster=True\npidfile=uwsgi.pid\ndaemonize=uwsgi.log\n#启动uwsgi的用户名和用户组\nuid=root\ngid=root\n#uwsgi自动重启\npy-autoreload=1\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br")])]),n("h2",{attrs:{id:"_22、谷歌浏览器快捷键"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_22、谷歌浏览器快捷键"}},[s._v("#")]),s._v(" 22、谷歌浏览器快捷键")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("浏览器缓存\n\nCtrl+Shift+Del  清除Google浏览器缓存的快捷键\n\nCtrl+Shift+R  重新加载当前网页而不使用缓存内容\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br")])]),n("h2",{attrs:{id:"_23、git克隆分支"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_23、git克隆分支"}},[s._v("#")]),s._v(" 23、git克隆分支")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("git clone -b dev 地址 \n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("h2",{attrs:{id:"_24、mysql更新语句、新增列、删除列"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_24、mysql更新语句、新增列、删除列"}},[s._v("#")]),s._v(" 24、mysql更新语句、新增列、删除列")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("update user set name='张三' where id=111\n# 删除\nDELETE FROM table_name [WHERE Clause]\n\n# 增加字段\nalter table 表名 add column 列名 类型;\n# 删除字段\nalter table 表名 dropcolumn 列名 ;\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br")])]),n("h2",{attrs:{id:"_25、删除指定格式的文件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_25、删除指定格式的文件"}},[s._v("#")]),s._v(" 25、删除指定格式的文件")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('import os\nimport re\n\n\ndef remove_specified_format_file(file_dir, format_name):\n    """\n    删除指定格式的文件\n    :param file_dir: 文件根目录\n    :param format_name: 格式\n    :return:\n    """\n    for root, dirs, files in os.walk(file_dir):\n        # print(root) #当前目录路径\n        # print(dirs) #当前路径下所有子目录\n        # print(files) #当前路径下所有非目录子文件\n        for file in files:\n            if re.match(format_name, file):\n                print(os.path.join(root, file))\n                os.remove(os.path.join(root, file))\n\n\nremove_specified_format_file(r\'D:\\学习\\LDC\\java\', r\'\\._*\')\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br")])]),n("h2",{attrs:{id:"_26、计算文件总数"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_26、计算文件总数"}},[s._v("#")]),s._v(" 26、计算文件总数")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('import os\n\n\ndef file_count(file_dir):\n    """\n    \n    :param file_dir: 文件根目录\n    :return:\n    """\n    count = 0\n    for root, dirs, files in os.walk(file_dir):\n        # print(root) #当前目录路径\n        # print(dirs) #当前路径下所有子目录\n        # print(files) #当前路径下所有非目录子文件\n        count += len(files)\n    return count\n\n\nprint(file_count(r\'D:\\学习\\LDC\\java\\Java学习\\newEstore\\estore\\js\'))\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br")])]),n("h2",{attrs:{id:"_27、计算文件夹大小"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_27、计算文件夹大小"}},[s._v("#")]),s._v(" 27、计算文件夹大小")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('import os\n\ndef file_size(file_dir):\n    """\n    删除指定格式的文件\n    :param file_dir: 文件根目录\n    :return:\n    """\n    size = 0\n    for root, dirs, files in os.walk(file_dir):\n        # print(root) #当前目录路径\n        # print(dirs) #当前路径下所有子目录\n        # print(files) #当前路径下所有非目录子文件\n        for file in files:\n            size += os.path.getsize(os.path.join(root, file))\n\t# M为单位\n    return size / 1024 / 1024\n\n\nfile_name = r\'D:\\学习\'\nprint(file_size(file_name))\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br")])]),n("h2",{attrs:{id:"_28、django实现jsonp跨域"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_28、django实现jsonp跨域"}},[s._v("#")]),s._v(" 28、Django实现jsonp跨域")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("# html\n$.ajax({\n                    url: '请求路由',\n                    type: 'GET',\n                    dataType: 'JSONP',\n                    data:{\n                      code: 'yes',\n                    },\n                    jsonp: 'callback',\n                    success: function(res) {\n                       var selectData = $.parseJSON(res);\n                       alert(selectData);\n                    },\n                    error: function(err) {\n\n                    }\n                })\n\n# views.py\ndef get(self, request, *args, **kwargs):\n        code = request.GET.get('code', '')\n        # 跨域请求\n        callback = request.GET.get('callback', '')\n        return HttpResponse(\"%s('%s')\" % (callback, json.dumps({'code': code})), status=status.HTTP_200_OK)\n                    \ncors解决跨域\n\nhttps://www.cnblogs.com/wxiaoyu/p/9578848.html\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br")])]),n("h2",{attrs:{id:"_29、微信获取用户信息"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_29、微信获取用户信息"}},[s._v("#")]),s._v(" 29、微信获取用户信息")]),s._v(" "),n("p",[s._v("参考：https://blog.csdn.net/weixin_39735923/article/details/79202563")]),s._v(" "),n("h2",{attrs:{id:"_30、uwsgi初始配置问题"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_30、uwsgi初始配置问题"}},[s._v("#")]),s._v(" 30、uwsgi初始配置问题")]),s._v(" "),n("p",[s._v("https://blog.csdn.net/weixin_39735923/article/details/79202563")]),s._v(" "),n("h2",{attrs:{id:"_31、django中drf序列化"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_31、django中drf序列化"}},[s._v("#")]),s._v(" 31、django中drf序列化")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("# 序列化器\nclass MsgSerializers(serializers.ModelSerializer):\n    addtime = serializers.DateTimeField(read_only=True, format=\"%Y-%m-%d %H:%M:%S\")\n    hasread = serializers.CharField(source='get_hasread_display')\n    msgtype = serializers.CharField(source='get_msgtype_display')\n    class Meta:\n        model = MallMsg\n        # 可以混合使用\n        fields = '__all__'  # '__all__' 所有字段\n        # 数据库层级控制（序列化链表操作）\n        # depth = 1  # 外键层级\n\n\n#分页器\nfrom rest_framework.pagination import PageNumberPagination\n\n\nclass MyLimitOffsetPagination(PageNumberPagination):\n\n    page_size = 3  # 默认的页面数据数量\n    page_query_param = 'page'  # 定制取数据页码key ？\n    page_size_query_param = 'page_size'  # 默认取数据页码key &\n    max_page_size = 15  # 数据每页取值的最大上限\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br")])]),n("h2",{attrs:{id:"_32、第三方库"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_32、第三方库"}},[s._v("#")]),s._v(" 32、第三方库")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("安装openssl\n pip3 install pyOpenSSL\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("h2",{attrs:{id:"_33、requests请求https携带ca证书"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_33、requests请求https携带ca证书"}},[s._v("#")]),s._v(" 33、requests请求https携带CA证书")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('import OpenSSL\nimport requests\nimport urllib3.contrib.pyopenssl\n\nurllib3.contrib.pyopenssl.inject_into_urllib3()\n\ndef p12_to_pem(certname, pwd):\n    """\n    从.p12文件中提取pem\n    :param certname:\n    :param pwd:\n    :return:\n    """\n    pem_name = certname + ".pem"\n    f_pem = open(pem_name, \'wb\')\n    p12file = certname + ".p12"\n    p12 = OpenSSL.crypto.load_pkcs12(open(p12file, \'rb\').read(), pwd)\n    f_pem.write(OpenSSL.crypto.dump_privatekey(OpenSSL.crypto.FILETYPE_PEM, p12.get_privatekey()))\n    f_pem.write(OpenSSL.crypto.dump_certificate(OpenSSL.crypto.FILETYPE_PEM, p12.get_certificate()))\n    ca = p12.get_ca_certificates()\n    if ca is not None:\n        for cert in ca:\n            f_pem.write(OpenSSL.crypto.dump_certificate(OpenSSL.crypto.FILETYPE_PEM, cert))\n    f_pem.close()\n    return pem_name\n\n\ndef post_cert_request(url, data,header, certname, pwd):\n    """\n    使用证书发起https请求\n    :param url:\n    :param data:\n    :param certname:\n    :param pwd:\n    :return:\n    """\n    if (certname != ""):\n        cert = p12_to_pem(certname, pwd)\n    else:\n        cert = None\n    r = requests.post(url, header=header, data=data, cert=cert)\n    return r\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br")])]),n("h2",{attrs:{id:"_34、django创建缓存命令"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_34、django创建缓存命令"}},[s._v("#")]),s._v(" 34、django创建缓存命令")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("python manage.py createcachetable 缓存表名\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("h2",{attrs:{id:"_35、django-更改超级用户密码"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_35、django-更改超级用户密码"}},[s._v("#")]),s._v(" 35、Django 更改超级用户密码")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("在工程文件目录下敲入：\npython manage.py shell\n\n再在python交互界面输入：\nfrom django.contrib.auth.models import User\nuser = User.objects.get(username = '用户名')\nuser.set_password('密码')\nuser.save()\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br")])]),n("h2",{attrs:{id:"_36、restframe使用缓存"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_36、restframe使用缓存"}},[s._v("#")]),s._v(" 36、restframe使用缓存")]),s._v(" "),n("p",[s._v("https://blog.csdn.net/Odyssues_lee/article/details/80872586")]),s._v(" "),n("h2",{attrs:{id:"_37、数据库"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_37、数据库"}},[s._v("#")]),s._v(" 37、数据库")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("select * from user  where ISNULL(code)\nupdate user set code='111',info='微信' where ISNULL(code)\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("h2",{attrs:{id:"_38、linux常用命令"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_38、linux常用命令"}},[s._v("#")]),s._v(" 38、linux常用命令")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("tail -f 日志名  实时监控日志\ntail -f 80_v10.log\n\nnetstat -na|grep 80  查看端口tcp连接数\nnetstat -na|grep 80 | wc -l 计算端口tcp连接数\n\nps -ef|grep python  查看有多少python程序在运行\n\ngunzip 2015.csv.gz   # 解压\nunzip 19.zip # 解压zip\nwc -l 2015.csv   # 查看行数\napt install lrzsz  # 安装\nsz 文件名  # 下载文件\n\n查找文件\nfind / -name 文件名\n\n匹配执行过的以find为开头的命令\nhistory | grep find\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br")])]),n("h2",{attrs:{id:"_39、xadmin禁止增加、删除"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_39、xadmin禁止增加、删除"}},[s._v("#")]),s._v(" 39、xadmin禁止增加、删除")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("# models.py\n# 用户管理\nclass UserManage(models.Model):\n    name = models.CharField(max_length=20, verbose_name='用户名')\n    phone = models.CharField(max_length=11, unique=True, verbose_name='手机号')\n    code = models.CharField(max_length=11, unique=True, verbose_name='编号')\n    \n    user = models.ForeignKey(User, on_delete=models.CASCADE, editable=False, null=True, verbose_name='管理员')\n\n# adminx.py\n# 用户列表\nclass UserAdmin(object):\n    list_display = [ 'code', 'phone', 'name',]\n    search_fields = ['code', 'phone']\n    list_filter = ['code', 'phone']\n    list_editable = ['name']  # 数据即时编辑\n    readonly_fields = ['code', 'phone', 'name']  # 只读字段，不能编辑\n    model_icon = 'fa fa-square'\n    model = UserInfo\n    \n    def has_delete_permission(self, *args, **kwargs):\n    \t# 禁止删除\n        if args:\n            return True\n        return False\n    \n\tdef has_add_permission(self,*args,**kwargs):\n\t\t# 禁止增加\n        return False\n        \n    def save_models(self):\n    \t# 用户级别设置\n        self.new_obj.user = self.request.user\n        flag = self.org_obj is None and 'create' or 'change'\n        if flag == 'create':\n        \t# 对密码字段进行加密\n            self.new_obj.password = encrypt_oracle(self.new_obj.password)\n        elif flag == 'change':\n            if 'password' in self.change_message():\n                self.new_obj.password = encrypt_oracle(self.new_obj.password)\n        else:\n        \tpass\n        super().save_models()\n\nxadmin.site.register(UserInfo, UserAdmin)\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br"),n("span",{staticClass:"line-number"},[s._v("44")]),n("br"),n("span",{staticClass:"line-number"},[s._v("45")]),n("br")])]),n("h2",{attrs:{id:"_40、时间格式字符串相减"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_40、时间格式字符串相减"}},[s._v("#")]),s._v(" 40、时间格式字符串相减")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("import datetime\nimport time\n\nstart = str(datetime.datetime.now())[:19]\ntime.sleep(60)\nend = str(datetime.datetime.now())[:19]\nprint(start,end)\nlink_start = datetime.datetime.strptime(start, '%Y-%m-%d %H:%M:%S')\nlink_end = datetime.datetime.strptime(end, '%Y-%m-%d %H:%M:%S')\nlink_min = round((link_end - link_start).seconds / 60, 2)\nprint(link_min,'分钟')\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br")])]),n("h2",{attrs:{id:"_41、显示循环进度条"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_41、显示循环进度条"}},[s._v("#")]),s._v(" 41、显示循环进度条")]),s._v(" "),n("p",[s._v("参考：https://blog.csdn.net/zejianli/article/details/77915751")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("from tqdm import tqdm,trange\nfrom time import sleep\ntext = \"\"\nfor char in tqdm([\"a\", \"b\", \"c\", \"d\"]):\n    text = text + char\n    sleep(1)\n    \n    \n# 方式二\nimport time\n\n\ndef process_bar(percent, index, total,start_time, start_str='', end_str='', total_length=100):\n    # 进度条\n    percent_length = int(percent)\n    bar = '\\r' + start_str + ('\\033[1;31;41m \\033[0m' * percent_length + '\\033[1;37;47m \\033[0m' * (\n                total_length - percent_length)) + f'  {round(index / total * 100, 2)}%  ' + f' {index}|{end_str}'+ f'   |已进行时间: {round(time.time() - start_time, 2)}秒'\n\n    print(bar, end='', flush=True)\n\n\nif __name__ == '__main__':\n    data_set = [i for i in range(23)]\n    i = 0\n    start_time = time.time()\n    total = len(data_set)\n    end_str = '{}'.format(total)\n    for data in data_set:\n        time.sleep(1)\n        i += 1\n        process_bar(i * 100 / total, i, total, start_time, start_str='', end_str=end_str, total_length=100)\n\n# 方式三\nimport sys\nimport time\n\nd = [i for i in range(100)]\nfor i in range(len(d)):\n    time.sleep(1)\n    sys.stdout.write('\\r>> Downloading  %.2f%%' % (float(i) / float(len(d)) * 100.0))\nsys.stdout.flush()\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br")])]),n("h2",{attrs:{id:"_42、把列表中的字典转成csv文件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_42、把列表中的字典转成csv文件"}},[s._v("#")]),s._v(" 42、把列表中的字典转成csv文件")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("import pandas as pd\nlists = [{'a':1,'b':2},{'a':2,'b':3}]\ndf = pd.DataFrame(lists)\nprint(df)\ndf.to_csv('result2.csv')\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br")])]),n("h2",{attrs:{id:"_43、windows添加右键新建markdown文件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_43、windows添加右键新建markdown文件"}},[s._v("#")]),s._v(" 43、windows添加右键新建MarkDown文件")]),s._v(" "),n("p",[s._v("在网上下载Typora软件安装后\n1、在桌面上新建一个txt文件，输入以下内容：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('Windows Registry Editor Version 5.00\n[HKEY_CLASSES_ROOT\\.md\\ShellNew]\n"NullFile"=""\n"FileName"="template.md"\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("p",[s._v("2、另存为，改后缀为.reg，保存类型为.txt，编码为Unicode")]),s._v(" "),n("p",[n("img",{attrs:{src:"https://img-blog.csdnimg.cn/20200526232015169.png",alt:"在这里插入图片描述"}})]),s._v(" "),n("p",[s._v("3、双击运行，确定，重启电脑，此时在桌面右键就有了新建md文件")]),s._v(" "),n("h2",{attrs:{id:"_44、redis设置值定时过期"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_44、redis设置值定时过期"}},[s._v("#")]),s._v(" 44、redis设置值定时过期")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("import datetime\nimport redis\n\nredis_client = redis.Redis(\n    host='127.0.0.1',\n    port=6379,\n    db=0,\n    password='123456'\n)\n\ndef redis_set():\n    \"\"\"\n    redis设置值定时过期\n    :return:\n    \"\"\"\n    global redis_client\n\n    redis_client.set('name','ldc')\n    now = datetime.datetime.now()\n    # 设置‘name’50秒过期\n    expire_time = now + datetime.timedelta(hours=0, minutes=0, seconds=50)\n    redis_client.expireat('name', expire_time)\n\n\nif __name__ == '__main__':\n    redis_set()\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br")])]),n("h2",{attrs:{id:"_45、linux根据端口杀进程"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_45、linux根据端口杀进程"}},[s._v("#")]),s._v(" 45、linux根据端口杀进程")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("import os\n\n\ndef killport(port):\n    command = '''kill -9 $(netstat -nlp | grep :''' + str(port) + ''' | awk '{print $7}' | awk -F\"/\" '{ print $1 }')'''\n    os.system(command)\n\n\n# 开始执行\nif __name__ == '__main__':\n    port = 4237\n    killport(port)\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br")])]),n("h2",{attrs:{id:"_46、监控linux网络流量"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_46、监控linux网络流量"}},[s._v("#")]),s._v(" 46、监控linux网络流量")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("iftop -n -N -i eth0\n\n\nnethogs eth0\n\n\nvim +/字符串 文件\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br")])]),n("h2",{attrs:{id:"_47、win10添加右键打开cmd"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_47、win10添加右键打开cmd"}},[s._v("#")]),s._v(" 47、win10添加右键打开cmd")]),s._v(" "),n("p",[s._v("通过添加注册表项实现")]),s._v(" "),n("p",[s._v("win + r 输入 regedit")]),s._v(" "),n("p",[s._v("找到注册表位置：HKEY_CLASSES_ROOT\\Directory\\Background\\shell\\")]),s._v(" "),n("p",[s._v("右键“shel”l,新建“项”，命名为“以管理员身份打开cmd”，")]),s._v(" "),n("p",[s._v('右键“以管理员身份打开cmd”，新建“DWORD(32位)值”，命名为"ShowBasedOnVelocityId",值为“639bc8”')]),s._v(" "),n("p",[s._v("右键“以管理员身份打开cmd”，新建“项”，命名为“command”")]),s._v(" "),n("p",[s._v("右键“command”，点击“默认”，点击“修改”，填写数值为 cmd.exe /s /k pushd “%V”")]),s._v(" "),n("h2",{attrs:{id:"_48、xadmin后台无法显示下拉框完整内容"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_48、xadmin后台无法显示下拉框完整内容"}},[s._v("#")]),s._v(" 48、xadmin后台无法显示下拉框完整内容")]),s._v(" "),n("p",[s._v("解决方案 在根目录中找到/static/xadmin/vendor/selectize/selectize.bootstrap3.css\n在331行后加入 position: static;")]),s._v(" "),n("p",[n("img",{attrs:{src:"https://img-blog.csdnimg.cn/20190704184201572.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xtX2lzX2Rj,size_16,color_FFFFFF,t_70",alt:"在这里插入图片描述"}})]),s._v(" "),n("h2",{attrs:{id:"_49、xadmin单点登录"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_49、xadmin单点登录"}},[s._v("#")]),s._v(" 49、xadmin单点登录")]),s._v(" "),n("p",[s._v("使用中间件实现。")]),s._v(" "),n("p",[s._v("新建一个utils.py文件，存放以下代码：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("    from django.contrib.sessions.models import Session\n    from django.db.models import Q\n    from django.utils import timezone\n    from django.utils.deprecation import MiddlewareMixin\n    \n    \n    class XadminMiddleware(MiddlewareMixin):\n        def process_request(self, request):\n            \"\"\"xadmin后台单点登录\"\"\"\n            PATH_INFO = request.META.get('PATH_INFO', '')\n            if PATH_INFO and 'xadmin' in PATH_INFO:\n                request.session.clear_expired()   # 清除过期的key\n                session_key = request.session.session_key\n                for session in Session.objects.filter(~Q(session_key=session_key), expire_date__gte=timezone.now()):\n                    data = session.get_decoded()\n                    if data.get('_auth_user_id', None) == str(request.user.id):\n                        session.delete()\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br")])]),n("p",[s._v("然后在urls.py中设置：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("    urlpatterns = [\n    ...\n    re_path('^xadmin/', xadmin.site.urls),\n    ...\n    ]\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("p",[s._v("然后在settings.py中注册中间件")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("    MIDDLEWARE = [\n    ...\n    \n    'utils.xadminauth.XadminMiddleware',\n    ...\n    ]\n\tSESSION_COOKIE_AGE = 1209600  # 设置过期时间\n    SESSION_SAVE_EVERY_REQUEST = Ture  # 每次请求都更新\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br")])]),n("p",[s._v("【参考】 https://blog.csdn.net/Python_anning")]),s._v(" "),n("h2",{attrs:{id:"_50、django-restful-多个models数据表序列化合并返回-一次请求返回多个序列化器数据"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_50、django-restful-多个models数据表序列化合并返回-一次请求返回多个序列化器数据"}},[s._v("#")]),s._v(" 50、Django restful 多个models数据表序列化合并返回（一次请求返回多个序列化器数据）")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("# 导入第三方包\npip install django-crispy-forms==1.7.2\n\n# 在settings.py中添加应用\nINSTALLED_APPS = [\n...\n'drf_multiple_model',\n'rest_framework',\n...\n]\n\n# 在views.py中使用\n    from drf_multiple_model.pagination import MultipleModelLimitOffsetPagination\n    from drf_multiple_model.views import ObjectMultipleModelAPIView\n    \n    \n    class LimitPagination(MultipleModelLimitOffsetPagination):\n        # 多个models数据表联合查询，分页，每页限制数据10条\n        default_limit = 10\n        \n    class StudentSerializers(serializers.ModelSerializer):\n        \"\"\"学生表序列化器\"\"\"\n        # merchant = MerchantSerializers()\n        \n        register_time = serializers.DateTimeField(read_only=True, format=\"%Y-%m-%d %H:%M:%S\")\n       \n        class Meta:\n            model = Student\n            fields = '__all__'\n    class ClassesSerializers(serializers.ModelSerializer):\n        \"\"\"班级表序列化器\"\"\"\n        # merchant = MerchantSerializers()\n        \n        add_time = serializers.DateTimeField(read_only=True, format=\"%Y-%m-%d %H:%M:%S\")\n       \n        class Meta:\n            model = Classes\n            fields = '__all__'\n    \n    class SchoolSerializers(serializers.ModelSerializer):\n        \"\"\"学校表序列化器\"\"\"\n        # merchant = MerchantSerializers()\n        \n        add_time = serializers.DateTimeField(read_only=True, format=\"%Y-%m-%d %H:%M:%S\")\n       \n        class Meta:\n            model = School\n            fields = '__all__'      \n            \n    \n    class StudentInfo(ObjectMultipleModelAPIView):\n        # 获取学生信息，班级信息，学校信息\n    \n        def get(self, request, *args, **kwargs):\n            uid = request.GET.get('uid', '')  # 学生id\n            cid = request.GET.get('cid', '')  # 班级id\n            sid = request.GET.get('sid', '')  # 学校id\n            \n            self.querylist = [\n                {'queryset': Student.objects.filter(id=uid).order_by('-id'),\n                    'serializer_class':  StudentSerializers, 'label': 'student', },\n                {'queryset': Classes.objects.filter(id=cid).order_by('-id'),\n                    'serializer_class':  ClassesSerializers, 'label': 'classes', },\n                {'queryset': School.objects.filter(id=sid).order_by('-id'),\n                    'serializer_class':  SchoolSerializers, 'label': 'school', },\n            ]\n    \n            return self.list(request, *args, **kwargs)\n    \n        pagination_class = LimitPagination\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br"),n("span",{staticClass:"line-number"},[s._v("44")]),n("br"),n("span",{staticClass:"line-number"},[s._v("45")]),n("br"),n("span",{staticClass:"line-number"},[s._v("46")]),n("br"),n("span",{staticClass:"line-number"},[s._v("47")]),n("br"),n("span",{staticClass:"line-number"},[s._v("48")]),n("br"),n("span",{staticClass:"line-number"},[s._v("49")]),n("br"),n("span",{staticClass:"line-number"},[s._v("50")]),n("br"),n("span",{staticClass:"line-number"},[s._v("51")]),n("br"),n("span",{staticClass:"line-number"},[s._v("52")]),n("br"),n("span",{staticClass:"line-number"},[s._v("53")]),n("br"),n("span",{staticClass:"line-number"},[s._v("54")]),n("br"),n("span",{staticClass:"line-number"},[s._v("55")]),n("br"),n("span",{staticClass:"line-number"},[s._v("56")]),n("br"),n("span",{staticClass:"line-number"},[s._v("57")]),n("br"),n("span",{staticClass:"line-number"},[s._v("58")]),n("br"),n("span",{staticClass:"line-number"},[s._v("59")]),n("br"),n("span",{staticClass:"line-number"},[s._v("60")]),n("br"),n("span",{staticClass:"line-number"},[s._v("61")]),n("br"),n("span",{staticClass:"line-number"},[s._v("62")]),n("br"),n("span",{staticClass:"line-number"},[s._v("63")]),n("br"),n("span",{staticClass:"line-number"},[s._v("64")]),n("br"),n("span",{staticClass:"line-number"},[s._v("65")]),n("br"),n("span",{staticClass:"line-number"},[s._v("66")]),n("br"),n("span",{staticClass:"line-number"},[s._v("67")]),n("br"),n("span",{staticClass:"line-number"},[s._v("68")]),n("br"),n("span",{staticClass:"line-number"},[s._v("69")]),n("br"),n("span",{staticClass:"line-number"},[s._v("70")]),n("br")])]),n("h2",{attrs:{id:"_51、-django序列化器返回外键关联数据"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_51、-django序列化器返回外键关联数据"}},[s._v("#")]),s._v(" 51、 Django序列化器返回外键关联数据")]),s._v(" "),n("p",[s._v("通过 related_name='goods_price’把两个表关联起来，当返回Goods的信息时也会返回相应的GoodsPrice信息")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("    class GoodsPriceSerializers(serializers.ModelSerializer):\n        \"\"\"商品价格表序列化器\"\"\"\n        \n        class Meta:\n            model = GoodsPrice\n            fields = ['price']\n    \n    class GoodsSerializers(serializers.ModelSerializer):\n        \"\"\"商品表序列化器\"\"\"\n        \n        goods_price = GoodsPriceSerializers(many=True, read_only=True)\n    \n        class Meta:\n            model = Goods\n            fields = ['title','goods_price']\n            depth = 2\n    \n    class Goods(models.Model):\n        \"\"\"商品表\"\"\"\n        title = models.CharField(max_length=50, verbose_name='商品名称')\n    \n        class Meta:\n            db_table = 'goods'\n            verbose_name = '商品信息表'\n            verbose_name_plural = verbose_name\n    \n        def __str__(self):\n            return self.title\n    \n    class GoodsPrice(models.Model):\n        \"\"\"商品价格表,通过外键关联商品信息表\"\"\"\n    \n        price = models.DecimalField(max_digits=10, decimal_places=2, default=0, verbose_name='售价')\n        goods = models.ForeignKey(to='Goods', related_name='goods_price', on_delete=models.SET_NULL, blank=True, null=True,verbose_name='商品')\n    \n        def __str__(self):\n            return str(self.price)\n    \n        class Meta:\n            managed = True\n            db_table = 'goodsPrice'\n            verbose_name = '商品售价'\n            verbose_name_plural = verbose_name\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br")])]),n("h2",{attrs:{id:"_52、python-django通过user-agent判断请求来源是微信扫一扫或者是支付宝扫一扫"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_52、python-django通过user-agent判断请求来源是微信扫一扫或者是支付宝扫一扫"}},[s._v("#")]),s._v(" 52、python Django通过User Agent判断请求来源是微信扫一扫或者是支付宝扫一扫")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("    class Footest(APIView):\n\t    def get(self, request, *args, **kwargs):\n\t        # print(request.META)\n\t        if 'MicroMessenger' in request.META['HTTP_USER_AGENT']:\n\t            return Response(data={'msg': '访问来源是微信'})\n\t        elif 'AlipayClient' in request.META['HTTP_USER_AGENT']:\n\t            return Response(data={'msg': '访问来源是支付宝'})\n\t        else:\n\t            return Response(data={'msg': '访问来源是其他'})\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br")])]),n("p",[s._v("User Agent中文名为用户代理，简称 UA，它是一个特殊字符串头，使得服务器能够识别客户使用的操作系统及版本、CPU 类型、浏览器及版本、浏览器渲染引擎、浏览器语言、浏览器插件等。")]),s._v(" "),n("p",[s._v("浏览器的 UA 字串")]),s._v(" "),n("p",[s._v("标准格式为： 浏览器标识 (操作系统标识; 加密等级标识; 浏览器语言) 渲染引擎标识 版本信息")]),s._v(" "),n("p",[s._v("获取user-Agent 之后，\n通过识别MicroMessenger或者AlipayClient这样的关键字应该就可以判断是微信还是支付宝\n【参考文章】 https://blog.csdn.net/fly910905/article/details/82498813?utm_source=blogxgwz4")]),s._v(" "),n("h2",{attrs:{id:"_53、xadmin后台集成-导入-插件-导入excel文件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_53、xadmin后台集成-导入-插件-导入excel文件"}},[s._v("#")]),s._v(" 53、xadmin后台集成’导入‘插件，导入excel文件")]),s._v(" "),n("p",[s._v("效果图：")]),s._v(" "),n("p",[n("img",{attrs:{src:"https://img-blog.csdnimg.cn/20190426190357134.png",alt:"在这里插入图片描述"}})]),s._v(" "),n("p",[s._v("1、添加")]),s._v(" "),n("p",[s._v("在虚拟环境根目录\\Lib\\site-packages\\xadmin\\plugins中添加excel.py文件")]),s._v(" "),n("p",[n("img",{attrs:{src:"https://img-blog.csdnimg.cn/20190426190440451.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xtX2lzX2Rj,size_16,color_FFFFFF,t_70",alt:"在这里插入图片描述"}})]),s._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",[n("code",[s._v('from xadmin.views import BaseAdminPlugin, ListAdminView\nfrom django.template import loader\nimport xadmin\n\nclass ListExcelImportPlugin(BaseAdminPlugin):\n    # 重写init_request\n    import_excel = False\n    def init_request(self, *args, **kwargs):\n        return self.import_excel\n\n    def block_top_toolbar(self, context, nodes):\n        # 这里 xadmin/excel/model_list.top_toolbar.import.html 是自己写的html文件\n      nodes.append(loader.render_to_string("xadmin/excel/model_list.top_toolbar.import.html"))\n\nxadmin.site.register_plugin(ListExcelImportPlugin, ListAdminView)\n')])])]),n("p",[s._v("在虚拟环境根目录\\Lib\\site-packages\\xadmin\\plugins__init__.py中")]),s._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",[n("code",[s._v("PLUGINS = (\n...\n    'excel',\n...\n)\n")])])]),n("p",[s._v("2、添加html文件")]),s._v(" "),n("p",[n("img",{attrs:{src:"https://img-blog.csdnimg.cn/20190426190455263.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xtX2lzX2Rj,size_16,color_FFFFFF,t_70",alt:"在这里插入图片描述"}})]),s._v(" "),n("p",[s._v("在虚拟环境根目录\\Lib\\site-packages\\xadmin\\templates\\xadmin\\中增加文件夹excel,在文件夹中添加model_list.top_toolbar.import.html文件")]),s._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",[n("code",[s._v('    {% load i18n %}\n<div class="btn-group export">\n    <a class="dropdown-toggle btn btn-default btn-sm" data-toggle="dropdown" href="#">\n        <i class="icon-share"></i> 导入数据 <span class="caret"></span>\n    </a>\n    <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel">\n        <li><a data-toggle="modal" data-target="#export-modal-import-excel"><i class="icon-circle-arrow-down"></i> 导入\n            Excel</a></li>\n    </ul>\n\n    <div id="export-modal-import-excel" class="modal fade">\n        <div class="modal-dialog">\n            <div class="modal-content">\n                <form method="post" action="" enctype="multipart/form-data">\n                    \x3c!--{% csrf_token %}--\x3e\n                    <div class="modal-header">\n                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>\n                        <h4 class="modal-title">导入 Excel</h4>\n                    </div>\n                    <div class="modal-body">\n                        <input type="file" onchange="fileChange(this)" name="excel" id="submit_upload">\n                    </div>\n                    <div class="modal-footer">\n                        <button type="button" class="btn btn-default" data-dismiss="modal">{% trans "Close" %}</button>\n                        <button class="btn btn-success" type="button" id="submit_upload_b"><i class="icon-share"></i> 导入\n                        </button>\n                    </div>\n                </form>\n            </div>\x3c!-- /.modal-content --\x3e\n        </div>\x3c!-- /.modal-dalog --\x3e\n    </div>\x3c!-- /.modal --\x3e\n\n</div>\n\n<script type="text/javascript">\n    function fileChange(target) {\n        //检测上传文件的类型\n        var imgName = document.all.submit_upload.value;\n        var ext, idx;\n        if (imgName == \'\') {\n            document.all.submit_upload_b.disabled = true;\n            alert("请选择需要上传的 xls 文件!");\n            return;\n        } else {\n            idx = imgName.lastIndexOf(".");\n            if (idx != -1) {\n                ext = imgName.substr(idx + 1).toUpperCase();\n                ext = ext.toLowerCase();\n\n                if (ext != \'xls\' && ext != \'xlsx\') {\n                    document.all.submit_upload_b.disabled = true;\n                    alert("只能上传 .xls 类型的文件!");\n                    return;\n                }\n            } else {\n                document.all.submit_upload_b.disabled = true;\n                alert("只能上传 .xls 类型的文件!");\n                return;\n            }\n        }\n    }\n\n    $(document).ready(function () {\n\n        $(\'#submit_upload_b\').click(function () {\n            var form_data = new FormData();\n            var file_info = $(\'#submit_upload\')[0].files[0];\n            form_data.append(\'file\', file_info);\n            form_data.append(\'file_source\', $(\'.breadcrumb li\').eq(1).text().trim());\n            var url = window.location.protocol + \'//\' + window.location.host + \'/importkdorderno/\'\n            $.ajax({\n                url: url,\n                type: \'POST\',\n                data: form_data,\n                dataType: "json",\n                beforeSend: function (xhr) {\n                    xhr.setRequestHeader("X-CSRFToken", $.getCookie("csrftoken"))\n                },\n                processData: false,  // tell jquery not to process the data\n                contentType: false, // tell jquery not to set contentType\n                success: function (res) {\n\n                    alert(res.msg);\n                    window.location.reload();\n                },\n                error: function (err) {\n                }\n            });\n        });\n    })\n<\/script>\n')])])]),n("p",[s._v("3、在views.py处理上传的excel文件")]),s._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",[n("code",[s._v("import pandas as pd\nfrom rest_framework.views import APIView\n\nclass ImportKDOrderNo(APIView):\n\n    def post(self, request, *args, **kwargs):\n        file = request.FILES.get('file')\n        # read = InMemoryUploadedFile().open()\n        data = pd.read_excel(file)  # 使用pandas处理excel文件\n\t\tfile_source = request.POST.get('file_source', '')  # 文件来源\n\t\t\n        if '订单号' and '物流单号' not in data:\n            return Response(data={'msg': '文件格式有误，第一行第一列应该为【订单号】，第一行第二列应该为【物流单号】'})\n        ordernos = data['订单号']\n        logistics = data['物流单号']\n        for i in range(len(ordernos)):\n            print('订单号', ordernos[i], '物流单号', logistics[i])\n          \n        return Response(data={'msg': '上传成功'})\n")])])]),n("p",[s._v("4、在urls.py中添加访问路由")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("from django.urls import path\nfrom 你的应用名称 import views\n\napp_name = '你的应用名称'\n\nurlpatterns = [\n    # 其他路由\n    ...\n    # 导入物流单号\n    path('importkdorderno/', views.ImportKDOrderNo.as_view(), name='importkdorderno'),\n]\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br")])]),n("h2",{attrs:{id:"_54、django中查找今天进账金额"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_54、django中查找今天进账金额"}},[s._v("#")]),s._v(" 54、Django中查找今天进账金额")]),s._v(" "),n("p",[s._v("views.py")]),s._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",[n("code",[s._v("from datetime import datetime\nclass CountFee(APIView):\n\tdef get(self, request, *args, **kwargs):\n\t\t# 获取当前时间的年月日，然后使用聚合函数添加fee字段的值\n    \tyear = datetime.now().year\n        month = datetime.now().month\n        day = datetime.now().day\n        count_fees = FeeDetail.objects.filter(addtime__year=year, addtime__month=month, addtime__day=day).aggregate(Sum('fee'))\n        all_fee = count_fees['fee__sum'] if count_fees['fee__sum'] else 0\n        print(all_fee)\n        return Response({'code': 1, 'msg': 'success', 'data': {'all_fee': all_fee}})\n")])])]),n("h2",{attrs:{id:"_55、判断是什么系统"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_55、判断是什么系统"}},[s._v("#")]),s._v(" 55、判断是什么系统")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("import platform\nPlATFORM = platform.system()\nif PlATFORM == \"Linux\":\n    print('linux')\nelse:\n    print('其他') \n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br")])]),n("h2",{attrs:{id:"_56、sql查询"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_56、sql查询"}},[s._v("#")]),s._v(" 56、sql查询")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("# 联合更新\nupdate malluser set master_master_id=3 where master_id in (select a.id from (select id from  malluser where id like '15%')a) \n# 统计某字段重复数据\nSELECT phone, COUNT(*) AS sumCount FROM malluser GROUP BY phone HAVING sumCount > 1;\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("h2",{attrs:{id:"_57、-xadmin后台删除数据出现错误"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_57、-xadmin后台删除数据出现错误"}},[s._v("#")]),s._v(" 57、 xadmin后台删除数据出现错误")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("    `get_deleted_objects() takes 3 positional arguments but 5 were given`\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("这是由于Django2.1版本和xadmin不兼容导致的")]),s._v(" "),n("p",[s._v("知道虚拟环境\\Lib\\site-packages\\xadmin\\plugins\\actions.py")]),s._v(" "),n("p",[s._v("修改93行，")]),s._v(" "),n("p",[s._v("把")]),s._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",[n("code",[s._v("deletable_objects, model_count, perms_needed, protected = get_deleted_objects(\n            queryset, self.opts, self.user, self.admin_site, using)\n")])])]),n("p",[s._v("改为")]),s._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",[n("code",[s._v("deletable_objects, model_count, perms_needed, protected = get_deleted_objects(\n            queryset, self.user, self.admin_site)\n")])])]),n("p",[s._v("然后在adminx.py文件中对应的模型类中允许删除")]),s._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",[n("code",[s._v("class MaterialAdmin(object):\n    \"\"\"素材库分类\"\"\"\n    list_display = ['id', 'name', 'class_id', 'is_delete', 'addtime']\n  \n    def has_delete_permission(self, *args, **kwargs):\n        return True\n")])])]),n("h2",{attrs:{id:"_58、xdamin限制用户点击"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_58、xdamin限制用户点击"}},[s._v("#")]),s._v(" 58、xdamin限制用户点击")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("//如果登录z=xadmin后台的账号不是【root】的就不能点击更新操作\n    var master_name = $('#top-nav').find('strong').text();\n        master_name =  master_name.substring(4);\n    if(master_name != 'root'){\n            $(\".grid-item a\").each(function(index, element) {\n                $(this).attr('href','#');\n            });\n        }\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br")])]),n("h2",{attrs:{id:"_59、获取公众号关注url"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_59、获取公众号关注url"}},[s._v("#")]),s._v(" 59、获取公众号关注url")]),s._v(" "),n("p",[s._v("在微信网页版，打开公众号，点击右上角“…”，在弹框中选择右下角中间的“查看历史记录”，然后在弹框中选择左上角倒数第一个，“用默认浏览器打开”，就可以在打开的浏览器中获取该公众号的关注url，当把这个url发给好友时，好友点开的就是去关注公众号的页面。")]),s._v(" "),n("h2",{attrs:{id:"_60、xadmin后台用户操作表权限"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_60、xadmin后台用户操作表权限"}},[s._v("#")]),s._v(" 60、xadmin后台用户操作表权限")]),s._v(" "),n("p",[s._v("虚拟环境根目录\\Lib\\site-packages\\xadmin\\views\\base.py")]),s._v(" "),n("p",[s._v("可以找到：")]),s._v(" "),n("p",[n("img",{attrs:{src:"https://img-blog.csdnimg.cn/20190627140512311.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xtX2lzX2Rj,size_16,color_FFFFFF,t_70",alt:"在这里插入图片描述"}})]),s._v(" "),n("p",[s._v("在项目子应用下的adminx.py中使用")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("    import xadmin\n    \n    from machine.models import Machine\n    \n    \n    class MachineAdmin(object):\n        list_display = ['code',]  # 显示的字段\n    \n        search_fields = ['code']  # 搜索的字段\n        list_filter = ['code', 'is_delete'] # 过滤的字段\n        ordering = ('-id',) # 按id降序排序\n        list_editable = ['is_delete', ]  # 数据即时编辑\n        list_per_page = 30  # 每页显示数据数量\n        model_icon = 'fa fa-cog fa-spin'  # 左侧显示的小图标\n    \n        def has_delete_permission(self, *args, **kwargs): \n            # 删除权限\n            if self.request.user.is_superuser:  # 管理员才能增加\n                return True\n            return False\n    \n        def has_add_permission(self, *args, **kwargs):\n            if self.request.user.is_superuser:  # 管理员才能增加\n                return True\n            return False\n    \n        def has_change_permission(self, *args, **kwargs):\n            if self.request.user.is_superuser: # 管理员才能修改\n                return True\n            return False\n    \n        def queryset(self):\n            qs = super(MachineAdmin, self).queryset()\n            if self.request.user.is_superuser:  # 管理员可以查看所有\n                return qs\n            else:\n                # 登录用户只能看到自己修改的数据\n                return qs.filter(master_id=self.request.user.last_name)\n    \n    \n    xadmin.site.register(MallMachine, MallMachineAdmin)\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br")])]),n("h2",{attrs:{id:"_61、使用nginx部署项目"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_61、使用nginx部署项目"}},[s._v("#")]),s._v(" 61、使用nginx部署项目")]),s._v(" "),n("p",[s._v("先在/etc/nginx/sites-available中创建一个配置文件，文件名为test(注意没有后缀):")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("    #设定虚拟主机配置\n        server {\n            #侦听80端口\n            listen 80;\n            listen 443 ssl;\n            #定义使用 www.nginx.cn访问\n    \t\t#ssl on;\n            server_name  xxx.xxx.com;\n            #定义服务器的默认网站根目录位置\n            root /root/项目名称;\n    \t\tssl_session_timeout 5m; \n            ssl_certificate   /etc/nginx/cert/xxx.pem;\n            ssl_certificate_key  /etc/nginx/cert/xxx.key;\n            ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:ECDHE:ECDH:AES:HIGH:!NULL:!aNULL:!MD5:!ADH:!RC4;\n            ssl_protocols TLSv1 TLSv1.1 TLSv1.2;\n            ssl_prefer_server_ciphers on;\n            #设定本虚拟主机的访问日志\n            #access_log  logs/nginx.access.log  main;\n     \n            #默认请求\n            location / {\n                #倒入了uwsgi的配置\n                include uwsgi_params; \n    \t\t    client_max_body_size\t50m;\n                #连接uwsgi的超时时间\n               # uwsgi_connect_timeout 30; \n     \t    #设定了uwsig服务器位置\n     \t    \tuwsgi_pass 127.0.0.1:8002;\n            }\n            \n            location /static{\n          \talias /root/项目名称/static;\n            }\n    \tlocation /media {\n    \talias /root/项目名称/media;\n    \t}\n     \n    }\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br")])]),n("p",[s._v("其中xxx.xxx.com表示域名.如果没有https，就使用#把ssl注释掉就可以了。")]),s._v(" "),n("p",[s._v("然后把test映射到/etc/nginx/sites-enabled")]),s._v(" "),n("p",[s._v("命令")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("    ln -s /etc/nginx/sites-available/test /etc/nginx/sites-enabled/test\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("p",[s._v("即可\n注意：\nuwsgi中配置listen=1024时，启动uwsgi时可能会报错：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("django + uwsgi + nginx 日志Listen queue size is greater than the system max net.core.somaxconn (128).\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("解决方法:")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("修改系统参数\n\n/proc/sys/net/ipv4/tcp_max_syn_backlog  原来2048    改为8192\n/proc/sys/net/core/somaxconn\t原来128     改为262144\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("p",[s._v("重启nginx")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("nginx -s reload\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("h2",{attrs:{id:"_62、xadmin后台发送邮件找回密码"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_62、xadmin后台发送邮件找回密码"}},[s._v("#")]),s._v(" 62、xadmin后台发送邮件找回密码")]),s._v(" "),n("p",[n("img",{attrs:{src:"https://img-blog.csdnimg.cn/20190710230444358.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xtX2lzX2Rj,size_16,color_FFFFFF,t_70",alt:"在这里插入图片描述"}})]),s._v(" "),n("p",[s._v("输入你用户绑定的邮箱")]),s._v(" "),n("p",[n("img",{attrs:{src:"https://img-blog.csdnimg.cn/20190710230454725.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xtX2lzX2Rj,size_16,color_FFFFFF,t_70",alt:"在这里插入图片描述"}})]),s._v(" "),n("p",[s._v("想要发送邮件，需要在settings.py中设置邮件发送器")]),s._v(" "),n("p",[s._v("settings.py最下面增加")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("    # ------------------------邮箱配置-----------------------------------------\n    EMAIL_BACKEND = 'django.core.mail.backends.smtp.EmailBackend' #把要发送的邮件显示再控制台上，方便调试\n    EMAIL_USE_SSL = True\n    EMAIL_HOST = 'smtp.qq.com'  # 如果是 163 改成 smtp.163.com\n    EMAIL_PORT = 465\n    EMAIL_HOST_USER = '邮箱账号' # 帐号\n    EMAIL_HOST_PASSWORD = '授权码'  # 到邮箱里开通\n    DEFAULT_FROM_EMAIL = EMAIL_HOST_USER\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br")])]),n("p",[s._v("由于django2与xadmin有些地方不兼容，需要修改源码：")]),s._v(" "),n("p",[s._v("找到虚拟环境根目录\\Lib\\site-packages\\xadmin\\plugins\\passwords.py")]),s._v(" "),n("p",[s._v("在passwords.py文件中大概79行，修改为")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("    return password_reset_confirm(request=request, uidb36=uidb36, token=token,\n                                          template_name=self.password_reset_confirm_template,\n                                          token_generator=self.password_reset_token_generator,\n                                          set_password_form=self.password_reset_set_form,\n                                          post_reset_redirect=self.get_admin_url('xadmin_password_reset_complete'),\n                                          current_app=self.admin_site.name, extra_context=context).dispatch(request=request,\n                                                                                                            uidb64=uidb36,token=token)\n                 \n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br")])]),n("p",[s._v("找到虚拟环境根目录Lib\\site-packages\\django\\contrib\\auth\\views.py")]),s._v(" "),n("p",[s._v("在views.py文件中大概258行，增加：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("    # 成功后跳转路由,根据自己实际来定\n    self.success_url = self.request.build_absolute_uri('/') + 'xadmin/'\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[n("img",{attrs:{src:"https://img-blog.csdnimg.cn/2020052620533440.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xtX2lzX2Rj,size_16,color_FFFFFF,t_70",alt:"在这里插入图片描述"}})]),s._v(" "),n("h2",{attrs:{id:"_63、xadmin外键下拉框添加过滤"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_63、xadmin外键下拉框添加过滤"}},[s._v("#")]),s._v(" 63、xadmin外键下拉框添加过滤")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("\nclass MallGoodsAdmin(object):\n    \"\"\"商品管理\"\"\"\n    list_display = ['id', 'show_photo', 'nickname', 'merchant', 'goods_class', 'label',]\n    search_fields = ['nickname']\n    list_filter = ['goods_class', 'label',]\n    model_icon = 'fa fa-bars'\n    list_editable = ['goods_class', ]\n    #,重写虚拟环境根目录下\\Lib\\site-packages\\xadmin\\views\\edit.py中的formfield_for_dbfield\n    def formfield_for_dbfield(self, db_field, **kwargs):\n        # 对MallGoodsClass这个表项的下拉框选择进行过滤\n        # MallGoods中有一个goods_class商品分类外键MallGoodsClass，过滤掉外键MallGoodsClass中 \n        # master_class为空的值\n        if db_field.name == \"goods_class\":\n            kwargs[\"queryset\"] = MallGoodsClass.objects.filter(master_class__isnull=False)\n            # 对assigned_recipient这个表项的下拉选择进行过滤\n        \treturn db_field.formfield(**dict(**kwargs))\n        return super().formfield_for_dbfield(db_field, **kwargs)\n\nxadmin.site.register(models.MallGoods, MallGoodsAdmin)\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br")])]),n("h2",{attrs:{id:"_64、xadmin即时编辑器去掉空标签"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_64、xadmin即时编辑器去掉空标签"}},[s._v("#")]),s._v(" 64、xadmin即时编辑器去掉空标签")]),s._v(" "),n("p",[n("img",{attrs:{src:"https://img-blog.csdnimg.cn/20190716151440115.png",alt:"在这里插入图片描述"}})]),s._v(" "),n("p",[s._v("虚拟环境根目录下\\Lib\\site-packages\\xadmin\\plugins\\editable.py，在大概")]),s._v(" "),n("p",[s._v("129行增加：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("    form.fields[fields[0]].empty_label = None\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("p",[n("img",{attrs:{src:"https://img-blog.csdnimg.cn/20190716151459680.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xtX2lzX2Rj,size_16,color_FFFFFF,t_70",alt:"在这里插入图片描述"}})]),s._v(" "),n("h2",{attrs:{id:"_65、用户增加的小组件-让其他用户可见"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_65、用户增加的小组件-让其他用户可见"}},[s._v("#")]),s._v(" 65、用户增加的小组件，让其他用户可见")]),s._v(" "),n("p",[s._v("找到虚拟环境根目录\\Lib\\site-packages\\xadmin\\views\\dashboard.py")]),s._v(" "),n("p",[s._v("在548行、554行")]),s._v(" "),n("p",[n("img",{attrs:{src:"https://img-blog.csdnimg.cn/20190723175537371.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xtX2lzX2Rj,size_16,color_FFFFFF,t_70",alt:"在这里插入图片描述"}})]),s._v(" "),n("p",[s._v("改为：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("    @filter_hook\n        def get_widgets(self):\n    \n            if self.widget_customiz:\n                portal_pos = UserSettings.objects.filter(\n                   key=self.get_portal_key())\n                if len(portal_pos):\n                    portal_pos = portal_pos[0].value\n                    widgets = []\n    \n                    if portal_pos:\n                        user_widgets = dict([(uw.id, uw) for uw in UserWidget.objects.filter(page_id=self.get_page_id())])\n                        for col in portal_pos.split('|'):\n                            ws = []\n                            for wid in col.split(','):\n                                try:\n                                    widget = user_widgets.get(int(wid))\n                                    if widget:\n                                        ws.append(self.get_widget(widget))\n                                except Exception as e:\n                                    import logging\n                                    logging.error(e, exc_info=True)\n                            widgets.append(ws)\n    \n                    return widgets\n    \n            return self.get_init_widget()\n\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br")])]),n("h2",{attrs:{id:"_66、pip-install-uwsgi出错"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_66、pip-install-uwsgi出错"}},[s._v("#")]),s._v(" 66、pip install uwsgi出错")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("plugins/python/uwsgi_python.h:2:20: fatal error: Python.h: No such file or directory\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("p",[s._v("首先安装python3环境")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("apt install python3-dev\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("p",[s._v("然后再虚拟环境中")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("pip install uwsgi\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("h2",{attrs:{id:"_66、xadmin后台加载数据慢-解决方案"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_66、xadmin后台加载数据慢-解决方案"}},[s._v("#")]),s._v(" 66、xadmin后台加载数据慢，解决方案")]),s._v(" "),n("p",[s._v("list_filter: 过滤器要慎用，不要使用类似id这些数据量大的字段")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("    class MallUserAdmin(object):\n        \"\"\"用户管理\"\"\"\n    \n        list_display = ['id', 'tp_icon', 'nickname', 'phone', 'level', 'balance', 'province', 'city', 'quxian']  # 显示字段\n        search_fields = ['id', 'nickname', 'phone']  # 搜索\n        list_filter = ['level', 'province', 'city', 'quxian']  # 过滤器\n        # list_filter = ['id', 'level', 'province', 'city', 'quxian']  # 如果加id，xadmin加载回来的数据就会很慢，所以不要在过滤器上使用id\n        list_per_page = 30  # 默认每页数量\n        model_icon = 'fa fa-users'  # 左侧图标\n        ordering = ['-id']  # 排序\n        readonly_fields = ['subscribe', 'wx_openid', 'phone']  # 只读字段\n        is_addbalance = True   # 加载自定义的插件\n        relfield_style = 'fk-ajax'  # 其他表如果外键到用户表就做ajax搜索查询，不一次性加载数据\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br")])]),n("h2",{attrs:{id:"_67-、xadmin导出插件处理-增加导出勾选数据项"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_67-、xadmin导出插件处理-增加导出勾选数据项"}},[s._v("#")]),s._v(" 67 、xadmin导出插件处理，增加导出勾选数据项")]),s._v(" "),n("p",[s._v("常规的导出只有两个选择【导出表头】、【导出全部数据】")]),s._v(" "),n("p",[n("img",{attrs:{src:"https://img-blog.csdnimg.cn/20190917141511283.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xtX2lzX2Rj,size_16,color_FFFFFF,t_70",alt:"在这里插入图片描述"}})]),s._v(" "),n("p",[s._v("现在想要做的是增加一个选择，即【导出表头】、【导出全部数据】、【导出勾选数据】，如下图：")]),s._v(" "),n("p",[n("img",{attrs:{src:"https://img-blog.csdnimg.cn/20190917141839822.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xtX2lzX2Rj,size_16,color_FFFFFF,t_70",alt:"在这里插入图片描述"}})]),s._v(" "),n("p",[s._v("需要修改xadmin源代码，具体如下")]),s._v(" "),n("h4",{attrs:{id:"_1、加载js文件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1、加载js文件"}},[s._v("#")]),s._v(" 1、加载js文件")]),s._v(" "),n("p",[s._v("找到虚拟环境\\Lib\\site-packages\\xadmin\\views\\list.py，在607行增加’xadmin.plugin.importexport.js’，如下图所示")]),s._v(" "),n("p",[n("img",{attrs:{src:"https://img-blog.csdnimg.cn/20190917141853832.png",alt:"在这里插入图片描述"}})]),s._v(" "),n("h4",{attrs:{id:"_2、修改export-py-后端处理下载文件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2、修改export-py-后端处理下载文件"}},[s._v("#")]),s._v(" 2、修改export.py，后端处理下载文件")]),s._v(" "),n("p",[s._v("找到虚拟环境\\Lib\\site-packages\\xadmin\\plugins\\export.py")]),s._v(" "),n("p",[s._v("在84行把rows = context[‘results’]修改成如下函数")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("    # 新增导出所选数据\n    # rows = context['results']  \n    rows = []\n    select_across = self.request.GET.get('_select_across', False) == '1'\n    selected = self.request.GET.get('_selected_actions', '')\n    if self.request.GET.get('selected', 'off') == 'on':\n        if not select_across:\n            selected_pk = selected.split(',')\n            for i in context['results']:\n                if str(i['object'].id) in selected_pk:\n                    rows.append(i)\n        else:\n            rows = context['results']\n    else:\n        rows = context['results']\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br")])]),n("p",[n("img",{attrs:{src:"https://img-blog.csdnimg.cn/2019091714200418.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xtX2lzX2Rj,size_16,color_FFFFFF,t_70",alt:"在这里插入图片描述"}})]),s._v(" "),n("p",[s._v("3、 修改model_list.top_toolbar.exports.html\n找到虚拟环境\\Lib\\site-packages\\xadmin\\templates\\xadmin\\blocks\\model_list.top_toolbar.exports.html")]),s._v(" "),n("p",[s._v("使用以下代码覆盖原文件")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('    {% load i18n %}\n    <div class="btn-group export">\n        <a id="export-menu" class="dropdown-toggle btn btn-default btn-sm" data-toggle="dropdown" href="#">\n            <i class="fa fa-share"></i> {% trans "Export" %} <span class="caret"></span>\n        </a>\n        <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel">\n            {% for et in export_types %}\n            <li><a data-toggle="modal" data-target="#export-modal-{{et.type}}"><i class="fa fa-arrow-circle-down">\n            </i> {% trans "Export" %} {{et.name}}</a></li>\n            {% endfor %}\n        </ul>\n    \n        {% for et in export_types %}\n        <div id="export-modal-{{et.type}}" class="modal fade">\n            <div class="modal-dialog">\n                <div class="modal-content">\n                    <form method="get" action="">\n    \n                        <div class="modal-header">\n                            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n                            <h4 class="modal-title">{% trans "Export" %} {{et.name}}</h4>\n                        </div>\n                        <div class="modal-body">\n                            {{ form_params|safe }}\n                            <input type="hidden" name="export_type" value="{{et.type}}">\n                            \x3c!-- 增加 导出所选数据 一栏 --\x3e\n                            <input type="hidden" name="_selected_actions" value=""/>\n                            <input type="hidden" name="_select_across" value=""/>\n    \n                            <label class="checkbox">\n                                {% if et.type == "xlsx" %}\n                                <input type="checkbox" name="export_xlsx_header" checked="checked" value="on">\n                                {% trans "Export with table header." %}\n                                {% endif %}\n                                {% if et.type == "xls" %}\n                                <input type="checkbox" name="export_xls_header" checked="checked" value="on">\n                                {% trans "Export with table header." %}\n                                {% endif %}\n                                {% if et.type == "csv" %}\n                                <input type="checkbox" name="export_csv_header" checked="checked" value="on">\n                                {% trans "Export with table header." %}\n                                {% endif %}\n                                {% if et.type == "xml" %}\n                                <input type="checkbox" name="export_xml_format" checked="checked" value="on">\n                                {% trans "Export with format." %}\n                                {% endif %}\n                                {% if et.type == "json" %}\n                                <input type="checkbox" name="export_json_format" checked="checked" value="on">\n                                {% trans "Export with format." %}\n                                {% endif %}\n                            </label>\n                            <label class="checkbox">\n                                <input type="checkbox" name="all" value="on"> {% trans "Export all data." %}\n                            </label>\n                            \x3c!-- 增加 导出所选数据 一栏 --\x3e\n                            <label class="checkbox">\n                                <input type="checkbox" name="selected" value="on"> 导出勾选数据\n                            </label>\n    \n                        </div>\n                        <div class="modal-footer">\n                            <button type="button" class="btn btn-default" data-dismiss="modal">{% trans "Close" %}</button>\n    \n                            <button class="btn btn-success myexport  glyphicon glyphicon-export " type="submit"><i\n                                    class="fa fa-share"></i> {% trans "Export" %}\n                            </button>\n                        </div>\n                    </form>\n                </div>\x3c!-- /.modal-content --\x3e\n            </div>\x3c!-- /.modal-dalog --\x3e\n        </div>\x3c!-- /.modal --\x3e\n        {% endfor %}\n    \n    </div>\n    \n    <script type="text/javascript">\n        // 如果是订单导出，把待出货订单设置成待收货订单\n        $(document).ready(function () {\n            $(\'.myexport\').click(function () {\n                // 当把订单导出时，需要修改订单状态为待收货状态\n                var url = window.location.protocol + \'//\' + window.location.host + "/exportorder/";\n                $("input[name=\'_select_across\']").val($("input[name=\'select_across\']").val());\n                if ($("input[name=\'selected\']").is(\':checked\')) {\n                    var arr = [];\n                    $.each($(\'.action-select\'), function () {\n                        if (true == $(this).prop(\'checked\')) {\n                            arr.push($(this).val());\n                        }\n                    });\n                    if(arr.length == 0){\n                        alert(\'请先勾选导出数据\')\n                        return false\n                    }\n                }else{\n                    var arr = []\n                    var order_type = $(\'.breadcrumb li\').eq(1).text().trim()\n                    $(\'.grid-item\').each(function (index, el) {\n    \n                        arr.push($(el).find(\'td\').eq(1).text().trim())\n                    })\n                }\n                if (($(\'.breadcrumb > li\').eq(1).text()).indexOf(\'订单\') != -1) {\n                    // 5秒后执行\n                    setTimeout(function () {\n                        $.ajax({\n                            type: "POST",\n                            url: url,\n                            data: {\'orderlist\': JSON.stringify(arr), \'order_type\': order_type,},\n                            beforeSend: function (xhr) {\n                                xhr.setRequestHeader("X-CSRFToken", $.getCookie("csrftoken"))\n                            },\n                            success: function (data) {\n                                window.location.reload();\n                            },\n                            error: function (xhr) {\n                                alert("出现未知错误");\n                                window.location.reload();\n                            }\n                        });\n                    }, 5000);\n                }\n            });\n        })\n    <\/script>\n\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br"),n("span",{staticClass:"line-number"},[s._v("44")]),n("br"),n("span",{staticClass:"line-number"},[s._v("45")]),n("br"),n("span",{staticClass:"line-number"},[s._v("46")]),n("br"),n("span",{staticClass:"line-number"},[s._v("47")]),n("br"),n("span",{staticClass:"line-number"},[s._v("48")]),n("br"),n("span",{staticClass:"line-number"},[s._v("49")]),n("br"),n("span",{staticClass:"line-number"},[s._v("50")]),n("br"),n("span",{staticClass:"line-number"},[s._v("51")]),n("br"),n("span",{staticClass:"line-number"},[s._v("52")]),n("br"),n("span",{staticClass:"line-number"},[s._v("53")]),n("br"),n("span",{staticClass:"line-number"},[s._v("54")]),n("br"),n("span",{staticClass:"line-number"},[s._v("55")]),n("br"),n("span",{staticClass:"line-number"},[s._v("56")]),n("br"),n("span",{staticClass:"line-number"},[s._v("57")]),n("br"),n("span",{staticClass:"line-number"},[s._v("58")]),n("br"),n("span",{staticClass:"line-number"},[s._v("59")]),n("br"),n("span",{staticClass:"line-number"},[s._v("60")]),n("br"),n("span",{staticClass:"line-number"},[s._v("61")]),n("br"),n("span",{staticClass:"line-number"},[s._v("62")]),n("br"),n("span",{staticClass:"line-number"},[s._v("63")]),n("br"),n("span",{staticClass:"line-number"},[s._v("64")]),n("br"),n("span",{staticClass:"line-number"},[s._v("65")]),n("br"),n("span",{staticClass:"line-number"},[s._v("66")]),n("br"),n("span",{staticClass:"line-number"},[s._v("67")]),n("br"),n("span",{staticClass:"line-number"},[s._v("68")]),n("br"),n("span",{staticClass:"line-number"},[s._v("69")]),n("br"),n("span",{staticClass:"line-number"},[s._v("70")]),n("br"),n("span",{staticClass:"line-number"},[s._v("71")]),n("br"),n("span",{staticClass:"line-number"},[s._v("72")]),n("br"),n("span",{staticClass:"line-number"},[s._v("73")]),n("br"),n("span",{staticClass:"line-number"},[s._v("74")]),n("br"),n("span",{staticClass:"line-number"},[s._v("75")]),n("br"),n("span",{staticClass:"line-number"},[s._v("76")]),n("br"),n("span",{staticClass:"line-number"},[s._v("77")]),n("br"),n("span",{staticClass:"line-number"},[s._v("78")]),n("br"),n("span",{staticClass:"line-number"},[s._v("79")]),n("br"),n("span",{staticClass:"line-number"},[s._v("80")]),n("br"),n("span",{staticClass:"line-number"},[s._v("81")]),n("br"),n("span",{staticClass:"line-number"},[s._v("82")]),n("br"),n("span",{staticClass:"line-number"},[s._v("83")]),n("br"),n("span",{staticClass:"line-number"},[s._v("84")]),n("br"),n("span",{staticClass:"line-number"},[s._v("85")]),n("br"),n("span",{staticClass:"line-number"},[s._v("86")]),n("br"),n("span",{staticClass:"line-number"},[s._v("87")]),n("br"),n("span",{staticClass:"line-number"},[s._v("88")]),n("br"),n("span",{staticClass:"line-number"},[s._v("89")]),n("br"),n("span",{staticClass:"line-number"},[s._v("90")]),n("br"),n("span",{staticClass:"line-number"},[s._v("91")]),n("br"),n("span",{staticClass:"line-number"},[s._v("92")]),n("br"),n("span",{staticClass:"line-number"},[s._v("93")]),n("br"),n("span",{staticClass:"line-number"},[s._v("94")]),n("br"),n("span",{staticClass:"line-number"},[s._v("95")]),n("br"),n("span",{staticClass:"line-number"},[s._v("96")]),n("br"),n("span",{staticClass:"line-number"},[s._v("97")]),n("br"),n("span",{staticClass:"line-number"},[s._v("98")]),n("br"),n("span",{staticClass:"line-number"},[s._v("99")]),n("br"),n("span",{staticClass:"line-number"},[s._v("100")]),n("br"),n("span",{staticClass:"line-number"},[s._v("101")]),n("br"),n("span",{staticClass:"line-number"},[s._v("102")]),n("br"),n("span",{staticClass:"line-number"},[s._v("103")]),n("br"),n("span",{staticClass:"line-number"},[s._v("104")]),n("br"),n("span",{staticClass:"line-number"},[s._v("105")]),n("br"),n("span",{staticClass:"line-number"},[s._v("106")]),n("br"),n("span",{staticClass:"line-number"},[s._v("107")]),n("br"),n("span",{staticClass:"line-number"},[s._v("108")]),n("br"),n("span",{staticClass:"line-number"},[s._v("109")]),n("br"),n("span",{staticClass:"line-number"},[s._v("110")]),n("br"),n("span",{staticClass:"line-number"},[s._v("111")]),n("br"),n("span",{staticClass:"line-number"},[s._v("112")]),n("br"),n("span",{staticClass:"line-number"},[s._v("113")]),n("br"),n("span",{staticClass:"line-number"},[s._v("114")]),n("br"),n("span",{staticClass:"line-number"},[s._v("115")]),n("br"),n("span",{staticClass:"line-number"},[s._v("116")]),n("br"),n("span",{staticClass:"line-number"},[s._v("117")]),n("br"),n("span",{staticClass:"line-number"},[s._v("118")]),n("br"),n("span",{staticClass:"line-number"},[s._v("119")]),n("br"),n("span",{staticClass:"line-number"},[s._v("120")]),n("br"),n("span",{staticClass:"line-number"},[s._v("121")]),n("br"),n("span",{staticClass:"line-number"},[s._v("122")]),n("br"),n("span",{staticClass:"line-number"},[s._v("123")]),n("br"),n("span",{staticClass:"line-number"},[s._v("124")]),n("br"),n("span",{staticClass:"line-number"},[s._v("125")]),n("br")])]),n("h2",{attrs:{id:"_68、使用f查询更新用户重要数据"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_68、使用f查询更新用户重要数据"}},[s._v("#")]),s._v(" 68、使用F查询更新用户重要数据")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("    from django.db.models import F\n    # 使用F查询更新用户余额\n    balance = 5  \n    MallUser.objects.filter(id=1).update(balance=F('balance') + balance)\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("p",[s._v("相当于sql的")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("    update Malluser set balance=balance + 5 where id=1;\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("h2",{attrs:{id:"_69、日志输出模块"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_69、日志输出模块"}},[s._v("#")]),s._v(" 69、日志输出模块")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("    import logging\n    import platform\n    # 全局函数\n    PlATFORM = platform.system()\n    if (PlATFORM == \"Linux\"):\n        # linux系统,文件保存在var下\n        SERVER_LOG_PATH = '/var/mylog.log'\n    else:\n        # windows系统,文件保存在D盘下\n        SERVER_LOG_PATH = 'D:\\mylog.log'\n    # 定义一个logging的对象，命名为mylog\n    LOGGER = logging.getLogger('mylog')\n    # 设置级别为WARNING\n    LOGGER.setLevel(logging.WARNING)\n    # 创建一个handler，用于写入日志文件\n    fh = logging.FileHandler(SERVER_LOG_PATH, encoding='utf-8')\n    fh.setLevel(logging.WARNING)\n    # 定义handler的输出格式\n    formatter = logging.Formatter('%(asctime)s - %(name)s - %(levelname)s - %(message)s', datefmt='%Y-%m-%d %H:%M:%S')\n    fh.setFormatter(formatter)\n    # 给Logger添加handler\n    LOGGER.addHandler(fh)\n    # 不在控制台显示\n    LOGGER.propagate = False\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br")])]),n("h2",{attrs:{id:"_70、字典排序"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_70、字典排序"}},[s._v("#")]),s._v(" 70、字典排序")]),s._v(" "),n("p",[s._v("字典在内存中发布是无序的，当想对键值或者键名进行排序时可以先把字典转成元组，这可以达到排序的目的。")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("score = {'小明': {'avg_score': 90, 'English': 90, 'Math': 90, 'Chniese': 90, },\n     '小红': {'avg_score': 60, 'English': 60, 'Math': 61, 'Chniese': 59, },\n     '小黑': {'avg_score': 70, 'English': 75, 'Math': 65, 'Chniese': 70, },\n     '小白': {'avg_score': 80, 'English': 95, 'Math': 65, 'Chniese': 80, },\n     }\n# 对姓名进行排序，即对键名进行排序\nb = sorted(score.items(), key=lambda x: x[0], reverse=True)\nshow_str = ''\nfor info in b:\n    # print(info)\n    key, value = info[0], info[1]\n    show_str += '姓名：{},平均分：{}，成绩：{}'.format(key,value['avg_score'], value) + '\\r\\n'\nprint('对姓名进行排序')\nprint(show_str)\n# 对平均分进行排序\nb = sorted(score.items(), key=lambda x: x[1]['avg_score'], reverse=True)\nshow_str = ''\nfor info in b:\n    # print(info)\n    key, value = info[0], info[1]\n    show_str += '姓名：{},平均分：{}，成绩：{}'.format(key,value['avg_score'], value) + '\\r\\n'\nprint('对平均分进行排序')\nprint(show_str)\n\n# 对英语成绩进行排序\nb = sorted(score.items(), key=lambda x: x[1]['English'], reverse=True)\nshow_str = ''\nfor info in b:\n    # print(info)\n    key, value = info[0], info[1]\n    show_str += '姓名：{},平均分：{}，成绩：{}'.format(key,value['avg_score'], value) + '\\r\\n'\nprint('对英语成绩进行排序')\nprint(show_str)\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br")])]),n("p",[s._v("输出：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("对姓名进行排序\n姓名：小黑,平均分：70，成绩：{'avg_score': 70, 'English': 75, 'Math': 65, 'Chniese': 70}\n姓名：小红,平均分：60，成绩：{'avg_score': 60, 'English': 60, 'Math': 61, 'Chniese': 59}\n姓名：小白,平均分：80，成绩：{'avg_score': 80, 'English': 95, 'Math': 65, 'Chniese': 80}\n姓名：小明,平均分：90，成绩：{'avg_score': 90, 'English': 90, 'Math': 90, 'Chniese': 90}\n\n对平均分进行排序\n姓名：小明,平均分：90，成绩：{'avg_score': 90, 'English': 90, 'Math': 90, 'Chniese': 90}\n姓名：小白,平均分：80，成绩：{'avg_score': 80, 'English': 95, 'Math': 65, 'Chniese': 80}\n姓名：小黑,平均分：70，成绩：{'avg_score': 70, 'English': 75, 'Math': 65, 'Chniese': 70}\n姓名：小红,平均分：60，成绩：{'avg_score': 60, 'English': 60, 'Math': 61, 'Chniese': 59}\n\n对英语成绩进行排序\n姓名：小白,平均分：80，成绩：{'avg_score': 80, 'English': 95, 'Math': 65, 'Chniese': 80}\n姓名：小明,平均分：90，成绩：{'avg_score': 90, 'English': 90, 'Math': 90, 'Chniese': 90}\n姓名：小黑,平均分：70，成绩：{'avg_score': 70, 'English': 75, 'Math': 65, 'Chniese': 70}\n姓名：小红,平均分：60，成绩：{'avg_score': 60, 'English': 60, 'Math': 61, 'Chniese': 59}\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br")])]),n("h3",{attrs:{id:"对列表中字典按多个键值排序"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#对列表中字典按多个键值排序"}},[s._v("#")]),s._v(" 对列表中字典按多个键值排序")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("from operator import itemgetter\ndata = [\n    {'code': 1, 'position': 300, 'time': '1620442242'},\n    {'code': 2, 'position': 255, 'time': '1620442242'},\n    {'code': 3, 'position': 256, 'time': '1620442242'},\n    {'code': 1, 'position': 500, 'time': '1620442242'},\n    {'code': 5, 'position': 455, 'time': '1620442242'},\n    {'code': 1, 'position': 322, 'time': '1620442242'},\n    {'code': 6, 'position': 676, 'time': '1620442242'},\n]\ndata = sorted(data, key=itemgetter('code', 'position'))\n\nprint(data)\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br")])]),n("p",[s._v("输出：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("[\n{'code': 1, 'position': 300, 'time': '1620442242'}, \n{'code': 1, 'position': 322, 'time': '1620442242'}, \n{'code': 1, 'position': 500, 'time': '1620442242'}, \n{'code': 2, 'position': 255, 'time': '1620442242'}, \n{'code': 3, 'position': 256, 'time': '1620442242'}, \n{'code': 5, 'position': 455, 'time': '1620442242'}, \n{'code': 6, 'position': 676, 'time': '1620442242'}]\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br")])]),n("h2",{attrs:{id:"_71、时间格式与字符串互转、比较大小"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_71、时间格式与字符串互转、比较大小"}},[s._v("#")]),s._v(" 71、时间格式与字符串互转、比较大小")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("import datetime\n\n# 当前时间转字符串\nnow = datetime.datetime.strftime(datetime.datetime.now(), '%Y-%m-%d %H:%M:%S')\n# 字符串转时间格式\nnow = datetime.datetime.strptime(now, '%Y-%m-%d %H:%M:%S')\na = now + datetime.timedelta(minutes=-15)\n# 时间比较大小\nif a < now:\n    print('yes')\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br")])]),n("h2",{attrs:{id:"_72、python把-u-开头的字符串转中文"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_72、python把-u-开头的字符串转中文"}},[s._v("#")]),s._v(" 72、python把’\\u’开头的字符串转中文")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("str_data = '\\\\u7528\\\\u6237 ID \\\\u6216\\\\u5bc6\\\\u7801\\\\u9519\\\\u8bef'\n# 字符串.encode('utf-8').decode('unicode_escape')\nstr_data_to_zh = str_data.encode('utf-8').decode('unicode_escape')\nprint(str_data_to_zh)\n\n# 输出\n用户 ID 或密码错误\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br")])]),n("h2",{attrs:{id:"_73、django进行数据迁移时出现no-changes-detected解决方案"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_73、django进行数据迁移时出现no-changes-detected解决方案"}},[s._v("#")]),s._v(" 73、django进行数据迁移时出现No changes detected解决方案")]),s._v(" "),n("p",[s._v("原因：可能是由于app下面没有migrations文件夹\n所以需要创建这个文件夹，命令")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("python manage.py makemigrations --empty 你的app名称\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("h2",{attrs:{id:"_74、ubuntu下载文件到windows桌面"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_74、ubuntu下载文件到windows桌面"}},[s._v("#")]),s._v(" 74、ubuntu下载文件到windows桌面")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("apt install lrzsz\nsz 123.txt\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("h2",{attrs:{id:"_75、git查看提交日志"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_75、git查看提交日志"}},[s._v("#")]),s._v(" 75、git查看提交日志")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v(' git log --author="ldc"\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("h2",{attrs:{id:"_76、python翻译模块"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_76、python翻译模块"}},[s._v("#")]),s._v(" 76、python翻译模块")]),s._v(" "),n("p",[s._v("可以把英文翻译成中文，也可以把中文翻译成英文")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('pip install  translate\n\nfrom translate import Translator\n\nname = \'giant panda, panda, panda bear, coon bear, Ailuropoda melanoleuca\'\ntranslator = Translator(to_lang="chinese")\ntranslation = translator.translate(name)\nprint(translation)\n\ntranslator= Translator(from_lang="chinese",to_lang="english")\ntranslation = translator.translate("我想你")\nprint(translation)\n\n\n输出：\n\n大熊猫，熊猫，熊猫熊，浣熊，大熊猫\nI missed you.\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br")])]),n("h2",{attrs:{id:"_77、python实现字符串转字典"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_77、python实现字符串转字典"}},[s._v("#")]),s._v(" 77、python实现字符串转字典")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("import ast\nimport json\n\ntarget_str = '{\"h\": 1, \"e\": 2, \"l\": 3, \"l\": 4, \"o\": 5}'\ntarget_str2 = \"{'h': 1, 'e': 2, 'l': 3, 'l': 4, 'o': 5}\"\n\n# 方式1：使用json，缺点，字符串中不能出现单引号\n# 由于 json 语法规定 数组或对象之中的字符串必须使用双引号，不能使用单引号\n# 官网https://www.json.org/json-en.html上有一段描述是\n# A string is a sequence of zero or more Unicode characters, wrapped in double quotes, using backslash escapes\nprint(json.loads(target_str))\n# print(json.loads(target_str2))   # 使用json转这个字符串会报错 Expecting property name enclosed in double quotes\n\n# 方式2：使用eval函数，缺点，不安全\nprint(eval(target_str))\nprint(eval(target_str2))\n# print(eval(\"__import__('os').system('dir')\"))  # 会列出当前的目录文件，如果字符串是一些删除命令，则可以把整个目录清空！\n\n# 方式3，使用ast.literal_eval，没有json与eval的缺点，推荐使用这个\nprint(ast.literal_eval(target_str))\nprint(ast.literal_eval(target_str2))\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br")])]),n("p",[s._v("输出：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("{'h': 1, 'e': 2, 'l': 4, 'o': 5}\n{'h': 1, 'e': 2, 'l': 4, 'o': 5}\n{'h': 1, 'e': 2, 'l': 4, 'o': 5}\n{'h': 1, 'e': 2, 'l': 4, 'o': 5}\n{'h': 1, 'e': 2, 'l': 4, 'o': 5}\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("h2",{attrs:{id:"_78、django-app-如何在后台显示中文名"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_78、django-app-如何在后台显示中文名"}},[s._v("#")]),s._v(" 78、django app 如何在后台显示中文名")]),s._v(" "),n("p",[s._v("1.在app (这里以user为例)下面的__init__.py文件中")]),s._v(" "),n("p",[s._v("添加:")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("default_app_config = 'user.apps.UserConfig'\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("2.在apps.py中")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("from django.apps import AppConfig\n\nclass UserConfig(AppConfig):\n    name = 'user'\n    verbose_name = '用户'\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("h2",{attrs:{id:"_79、使用python给excel指定行添加数据"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_79、使用python给excel指定行添加数据"}},[s._v("#")]),s._v(" 79、使用python给Excel指定行添加数据")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("import openpyxl, sys\n\nwb = openpyxl.load_workbook('b.xlsx')\nsheet = wb['Sheet1']\n\n# 在excel表格第二行添加新数据\naddrow = 1   # 增加一行\nrow = 2  # 在第二行新增一行\nname = 'b-back.xlsx' # 新的表名\n\nwb1 = openpyxl.Workbook()\nsheet1 = wb1['Sheet']\n\n# 复制前row行\nfor i in range(1, row):\n    for j in range(1, sheet.max_column + 1):\n        sheet1.cell(row=i, column=j).value = sheet.cell(row=i, column=j).value\n\n\n# 复制后row行\nfor i in range(row, sheet.max_row + 1):\n    for j in range(1, sheet.max_column + 1):\n        if i == row:\n            # 给第row行添加新的数据\n            sheet1.cell(row=row, column=j).value = '新增'\n        sheet1.cell(row=i + addrow, column=j).value = sheet.cell(row=i, column=j).value\n\nwb1.save(name)\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br")])]),n("p",[n("img",{attrs:{src:"https://img-blog.csdnimg.cn/20200526120005871.png",alt:"在这里插入图片描述"}})]),s._v(" "),n("h2",{attrs:{id:"_80、python中的format格式拼接字符串"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_80、python中的format格式拼接字符串"}},[s._v("#")]),s._v(" 80、python中的format格式拼接字符串")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("d = {'a': 1, 'b': 2, 'c': 3, 'd': 5}\n\nprint('{a},{b}'.format(**d))\nprint('{0},{1},{0}'.format('a', 'b'))\nprint(f\"{d['a']}\")\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("p",[s._v("输出：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("1,2\na,b,a\n1\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("h2",{attrs:{id:"_81、数据库inner-join、full-join、left-join、union、union-all区别"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_81、数据库inner-join、full-join、left-join、union、union-all区别"}},[s._v("#")]),s._v(" 81、数据库inner join、full join、left join、union、union all区别")]),s._v(" "),n("p",[s._v("表a_test")]),s._v(" "),n("p",[n("img",{attrs:{src:"https://img-blog.csdnimg.cn/20200529102527295.png#pic_center",alt:"在这里插入图片描述"}})]),s._v(" "),n("p",[s._v("表b_test")]),s._v(" "),n("p",[n("img",{attrs:{src:"https://img-blog.csdnimg.cn/20200529102549669.png#pic_center",alt:"在这里插入图片描述"}})]),s._v(" "),n("p",[s._v("INNER JOIN")]),s._v(" "),n("p",[s._v("是A和B的交集")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("SELECT * FROM a_test INNER JOIN b_test ON a_test.name = b_test.namesa\n\nInner join 产生的结果集中，是A和B的交集。\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[n("img",{attrs:{src:"https://img-blog.csdnimg.cn/20200529102631494.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xtX2lzX2Rj,size_16,color_FFFFFF,t_70#pic_center",alt:"在这里插入图片描述"}})]),s._v(" "),n("p",[s._v("FULL OUTER JOIN")]),s._v(" "),n("p",[s._v("产生A和B的并集")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("SELECT * FROM a_test FULL OUTER JOIN b_test ON a_test.name = b_test.name \n\nFull outer join 产生A和B的并集。\n但是需要注意的是，对于没有匹配的记录，则会以null做为值。\n可以使用IF NULL判断。\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("p",[n("img",{attrs:{src:"https://img-blog.csdnimg.cn/20200529102702865.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xtX2lzX2Rj,size_16,color_FFFFFF,t_70#pic_center",alt:"在这里插入图片描述"}})]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("SELECT * FROM a_test FULL OUTER JOIN b_test ON a_test.name = b_test.name\nWHERE a_test.id IS null OR b_test.id IS null\n\n产生A表和B表没有交集的数据集。\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("p",[n("img",{attrs:{src:"https://img-blog.csdnimg.cn/20200529102724731.png#pic_center",alt:"在这里插入图片描述"}})]),s._v(" "),n("p",[s._v("LEFT [OUTER] JOIN")]),s._v(" "),n("p",[s._v("产生表A的完全集，而B表中匹配的则有值，没有匹配的则以null值取代")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("SELECT * FROM a_test LEFT OUTER JOIN b_test ON a_test.name = b_test.name\n有些数据库可以不要OUTER\nSELECT * FROM a_test LEFT  JOIN b_test ON a_test.name = b_test.name\nLeft outer join 产生表A的完全集，而B表中匹配的则有值，没有匹配的则以null值取代。\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("p",[n("img",{attrs:{src:"https://img-blog.csdnimg.cn/20200529102808618.png#pic_center",alt:"在这里插入图片描述"}})]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("SELECT * FROM a_test LEFT OUTER JOIN b_test ON a_test.name = b_test.name \nWHERE b_test.id IS null\n\n产生在A表中有而在B表中没有的集合。\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("p",[n("img",{attrs:{src:"https://img-blog.csdnimg.cn/20200529102828846.png#pic_center",alt:"在这里插入图片描述"}})]),s._v(" "),n("p",[s._v("RIGHT [OUTER] JOIN")]),s._v(" "),n("p",[s._v("RIGHT OUTER JOIN 是后面的表为基础，与LEFT OUTER JOIN用法类似。")]),s._v(" "),n("p",[s._v("UNION 与 UNION ALL")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("UNION 操作符用于合并两个或多个 SELECT 语句的结果集。\n请注意，UNION 内部的 SELECT 语句必须拥有相同数量的列。\n列也必须拥有相似的数据类型。\n同时，每条 SELECT 语句中的列的顺序必须相同。\nUNION 只选取记录，而UNION ALL会列出所有记录。\n\nSELECT name FROM a_test UNION SELECT name FROM b_test\n\n选取不同值\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br")])]),n("p",[n("img",{attrs:{src:"https://img-blog.csdnimg.cn/20200529102855430.png#pic_center",alt:"在这里插入图片描述"}})]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("SELECT a_test.id,a_test.name  FROM a_test \nUNION \nSELECT b_test.id,b_test.name FROM b_test\n\n由于 id 51 xh   与 id 4 xh 并不相同，不合并\n\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br")])]),n("p",[n("img",{attrs:{src:"https://img-blog.csdnimg.cn/20200529102917488.png#pic_center",alt:"在这里插入图片描述"}})]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("SELECT name FROM a_test UNION ALL SELECT name FROM b_test\n\n全部列出来\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("p",[n("img",{attrs:{src:"https://img-blog.csdnimg.cn/20200529102937801.png#pic_center",alt:"在这里插入图片描述"}})]),s._v(" "),n("p",[s._v("还需要注意的是我们还有一个是“交差集” cross join, 这种Join没有办法用文式图表示，因为其就是把表A和表B的数据进行一个N*M的组合，即笛卡尔积。")]),s._v(" "),n("p",[s._v("表达式如下：SELECT * FROM a_test CROSS JOIN b_test")]),s._v(" "),n("p",[s._v("这个笛卡尔乘积会产生 4 x 4 = 16 条记录，一般来说，我们很少用到这个语法。但是我们得小心，如果不是使用嵌套的select语句，一般系统都会产生笛卡尔乘积然再做过滤。这是对于性能来说是非常危险的，尤其是表很大的时候。")]),s._v(" "),n("h2",{attrs:{id:"_82、windows电脑查看端口使用情况"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_82、windows电脑查看端口使用情况"}},[s._v("#")]),s._v(" 82、windows电脑查看端口使用情况")]),s._v(" "),n("p",[s._v("找出8000端口对应的PID进程，命令为：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("netstat -ano|findstr 8000\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("进程信息如下：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v(" TCP    0.0.0.0:8000           0.0.0.0:0              LISTENING       1620\n UDP    0.0.0.0:8000           *:*                                    1620\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("p",[s._v("找出进程对应的详细信息：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("tasklist |findstr 1620\n\nKGService.exe                 1620 Console                    1     18,696 K\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[s._v("关进程：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("taskkill /pid 1620 /F\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("查看程序占用内存\n比如查看python占用运行内存")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('tasklist  /fi "imagename eq python.exe"\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[n("img",{attrs:{src:"https://img-blog.csdnimg.cn/a61afd069e964e6f9d755c5c1884ca6f.png",alt:"在这里插入图片描述"}})]),s._v(" "),n("h2",{attrs:{id:"_83、django生成表和反向生成model"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_83、django生成表和反向生成model"}},[s._v("#")]),s._v(" 83、Django生成表和反向生成Model")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("正向生成：\npython manage.py makemigrations\npython manage.py migrate\n\n反向：\n会根据设置的数据库中的表在自动生成对应的Model代码，并打印出来\npython manage.py inspectdb\n\n以直接将打印的代码直接导入到指定的Model文件中\npython manage.py inspectdb > models.py\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br")])]),n("h2",{attrs:{id:"_84、windows的hosts文件位置"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_84、windows的hosts文件位置"}},[s._v("#")]),s._v(" 84、windows的hosts文件位置")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("C:\\Windows\\System32\\drivers\\etc\\hosts\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("h2",{attrs:{id:"_85、postgresql数据库"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_85、postgresql数据库"}},[s._v("#")]),s._v(" 85、postgresql数据库")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("# 如果表存在就先删除\ndrop table if exists student;\n# 创建学生表\n# id      serial not null  表示id自增\n# id      integer not null  表示id不自增\ncreate table student\n(\n    id                    serial not null\n        constraint student_pk\n            primary key,\n    name                  varchar,\n    class_id              integer,\n    height                numeric,\n    weight                numeric,\n    write_date            timestamp\n    \n);\n\ncomment on table student is '学生表';\n\ncomment on column student.name is '名称';\n\ncomment on column student.class_id is '班级ID';\n\ncomment on column student.height is '身高';\n\ncomment on column student.weight is '体重';\n\ncomment on column student.write_date is '修改时间';\n\nalter table student\n    owner to odoo;\n\n\n# 更新\nupdate user set name='张三' where id=111\n\n# 更新表a的字段为表b的值\nupdate account_invoice \nset sale_order_id=so.id \nfrom sale_order so \nwhere account_invoice.origin=so.name\n\n# 新增\ninsert into \"user\" (name,sex) values ('小明',1),('小红', 0)\n# 新增或更新\n如果id冲突就更新\nINSERT INTO  student(id, name)\n   VALUES(12, '小明'),(13, '小红')\n   ON conflict(id) DO UPDATE\n   SET name ='未知';\n如果id冲突就什么也不做\nINSERT INTO  student(id, name)\n   VALUES(12, '小明'),(13, '小红')\n   ON conflict(id) DO NOTHING;\n\n# 把一个表中的数据插入到另一个表中\ninsert into 目标表名 (column1,column2,columnn) select value1,value2,valuen from  源表名\n比如：\ninsert into student (name, classs_name,create_date) select  student_name as name, class_name, now() from class_table;\n\n# 获取当前时间\nnow()\nselect now()\n\n# 删除\nDELETE FROM table_name [WHERE Clause]\n\n# 增加字段\nalter table 表名 add column 列名 类型;\n# 删除字段\nalter table 表名 dropcolumn 列名 ;\n\n# postgresql数据库查看表所有字段\nselect * from information_schema.columns where table_schema='public' and table_name='表名';\n\n# postgresql获取所有表名\nselect tablename from pg_tables where schemaname='public'\n\n# 对查询结果按id降序显示\nselect * from table_name order by id desc\n\n# 对查询结果按id升序显示\nselect * from table_name order by id asc\n\n# 转义字符, 查找name中包含单引号的记录\nselect * from student where name like  E'%\\'%';\n\n# 查看表记录总数\nselect relname as TABLE_NAME, reltuples as rowCounts from pg_class where relkind = 'r' and relnamespace = (select oid from pg_namespace where nspname='public') order by rowCounts desc;\n\n# 将结果转换为数组\nSELECT array(SELECT \"name\" FROM sale_order);\n\n# 将数组合并为字符串\nselect array_to_string(array[1,2,3], ',')\n\n# 联合子集更新，把sale_order_line的name连接换行符，然后按id更新到表a_test中对应的name\nupdate a_test set name=array_to_string(array(select name from sale_order_line where order_id=a_test.id),'<br/>');\n\n# PostgreSQL合并查询同一列的多条记录，针对一对多，多对多字段\n比如表：\n\nid   name                  \n1    小明                   \n1    小红                     id   name\n1    小亮        --\x3e          1    小明，小亮，小红\n2    小强                     2    小强，小王\n2    小王\n\nSELECT \n    id, array_to_string(ARRAY(SELECT unnest(array_agg(name order by name desc))),',') AS all_name\nFROM  \n    student\nGROUP BY id;\n\n# case语句\ncase var\n\twhen condition1 then statement1\n\twhen condition2 then statement2\nelse statementn\nend as new_name\n\n比如：\nselect case name\n\twhen '小明' then 'xm'\n\twhen '小红' then 'xh'\n\twhen '小刚' then 'xg'\nelse 'xw'\nend as short_name\nfrom student\n\n# 临时表、字符串合并、类型转换、时间格式转换、当前时间\nWITH TEMP AS ( \n\tSELECT CAST ( concat ( bam.account_period_code, '-01' ) AS TIMESTAMP ) \n\t   AS account_period_time \n\t\t FROM bi_account_move AS bam ) \nSELECT\n\taccount_period_time,\n\tto_char(CURRENT_DATE,'yyyy-MM-dd hh24:MI:ss') as current_date,\n\tto_char( account_period_time, 'yyyy' ) as year,\n\tto_char( account_period_time, 'MM' ) as month,\n\tto_char( account_period_time, 'dd' ) as day \nFROM TEMP\n\n比如：\naccount_period_time\tcurrent_date\t    year\tmonth\tday\n2019-06-01 0:00:00\t2020-06-24 00:00:00\t2019\t 06\t     01\n2019-06-01 0:00:00\t2020-06-24 00:00:00\t2019\t 06\t     01\n\n# 多个字符串拼接\nselect \nconcat('payment_', CAST(ap.id as varchar)) as line_key\nfrom ap\n\n# 将查询所得结果集的某一字段拼接成字符串，默认的是逗号\nselect GROUP_CONCAT(id) from test where id>5;\n结果为：\n1,2,3,4,5,6,7\n# 使用其他分隔符拼接\nselect GROUP_CONCAT(id separator '-') from test where id>5;\n结果为：\n1-2-3-4-5-6-7\n# 多个临时表\nWITH temp_student AS ( SELECT ID, NAME, sex FROM student WHERE sex = TRUE ),\ntemp_class AS (\n\tSELECT\n\t\tID,\n\t\tNAME,\n\t\tstudent_id,\n\t\tteacher_id\n\tFROM\n\t\tthe_class \n\t),\n\ttemp_teacher AS (\n\tSELECT \n\t  ID,\n\t\tNAME,\n\t\tage \n\tFROM\n\t\tteacher \n\t) \n\tSELECT\n\tts.NAME AS student_name,\n\ttc.NAME AS class_name,\n\tte.NAME AS teacher_name\n\tfrom temp_student as ts\n\tLEFT JOIN temp_class AS tc ON tc.student_id = ts.ID  \n\tLEFT JOIN teacher AS te ON te.id = tc.teacher_id  \n\n# null转成有意义的值\nselect COALESCE(name, '') as name from a_test\n意思就是如果name为null，就转为空字符串\n\n# 字符串截取\nselect SUBSTRING('abcd',1,2); -- result:ab 表示从下标从1开始,截取2个字符\n\n# 使用 interval 时间相加减(+/-)\n当前时间 + 10秒，\nselect to_char(now() + interval '10 second', 'yyyy-mm-dd hh24:mi:ss')  as reqDate from account_period;\n当前时间 - 10秒\nselect to_char(now() + interval '-10 second', 'yyyy-mm-dd hh24:mi:ss')  as reqDate from account_period;\n \n当前时间 + 10分，\nselect to_char(now() + interval '10 minute', 'yyyy-mm-dd hh24:mi:ss')  as reqDate  from account_period;\n \n当前时间 + 10时，\nselect to_char(now() + interval '10 hour', 'yyyy-mm-dd hh24:mi:ss')  as reqDate from account_period;\n \n当前时间 + 10天，\nselect to_char(now() + interval '10 day', 'yyyy-mm-dd hh24:mi:ss')  as reqDate from account_period;\n\n当前时间 + 10年，\nselect to_char(now() + interval '10 year', 'yyyy-mm-dd hh24:mi:ss')  as reqDate from account_period;\n\n# UNION types numeric and text cannot be matched\nNULL::NUMERIC\n 这个问题，是因为几个sql组合在一起时，同一个字段的值，遇到null时，需要进行类型转换。\n\n# 对行记录定义行编号，使用函数ROW_NUMBER()\n# 按分数进行降序，然后给行记录标记行编号，可以作为排名来使用\nselect           \n\tROW_NUMBER() OVER (ORDER BY score desc) AS sequence_number,\n\tname,score\nfrom\n\tb_test\n\n# 数字转字符串  \nselect cast(123 as VARCHAR); \n\n# 字符串转数字  \nselect cast('123' as INTEGER);\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br"),n("span",{staticClass:"line-number"},[s._v("44")]),n("br"),n("span",{staticClass:"line-number"},[s._v("45")]),n("br"),n("span",{staticClass:"line-number"},[s._v("46")]),n("br"),n("span",{staticClass:"line-number"},[s._v("47")]),n("br"),n("span",{staticClass:"line-number"},[s._v("48")]),n("br"),n("span",{staticClass:"line-number"},[s._v("49")]),n("br"),n("span",{staticClass:"line-number"},[s._v("50")]),n("br"),n("span",{staticClass:"line-number"},[s._v("51")]),n("br"),n("span",{staticClass:"line-number"},[s._v("52")]),n("br"),n("span",{staticClass:"line-number"},[s._v("53")]),n("br"),n("span",{staticClass:"line-number"},[s._v("54")]),n("br"),n("span",{staticClass:"line-number"},[s._v("55")]),n("br"),n("span",{staticClass:"line-number"},[s._v("56")]),n("br"),n("span",{staticClass:"line-number"},[s._v("57")]),n("br"),n("span",{staticClass:"line-number"},[s._v("58")]),n("br"),n("span",{staticClass:"line-number"},[s._v("59")]),n("br"),n("span",{staticClass:"line-number"},[s._v("60")]),n("br"),n("span",{staticClass:"line-number"},[s._v("61")]),n("br"),n("span",{staticClass:"line-number"},[s._v("62")]),n("br"),n("span",{staticClass:"line-number"},[s._v("63")]),n("br"),n("span",{staticClass:"line-number"},[s._v("64")]),n("br"),n("span",{staticClass:"line-number"},[s._v("65")]),n("br"),n("span",{staticClass:"line-number"},[s._v("66")]),n("br"),n("span",{staticClass:"line-number"},[s._v("67")]),n("br"),n("span",{staticClass:"line-number"},[s._v("68")]),n("br"),n("span",{staticClass:"line-number"},[s._v("69")]),n("br"),n("span",{staticClass:"line-number"},[s._v("70")]),n("br"),n("span",{staticClass:"line-number"},[s._v("71")]),n("br"),n("span",{staticClass:"line-number"},[s._v("72")]),n("br"),n("span",{staticClass:"line-number"},[s._v("73")]),n("br"),n("span",{staticClass:"line-number"},[s._v("74")]),n("br"),n("span",{staticClass:"line-number"},[s._v("75")]),n("br"),n("span",{staticClass:"line-number"},[s._v("76")]),n("br"),n("span",{staticClass:"line-number"},[s._v("77")]),n("br"),n("span",{staticClass:"line-number"},[s._v("78")]),n("br"),n("span",{staticClass:"line-number"},[s._v("79")]),n("br"),n("span",{staticClass:"line-number"},[s._v("80")]),n("br"),n("span",{staticClass:"line-number"},[s._v("81")]),n("br"),n("span",{staticClass:"line-number"},[s._v("82")]),n("br"),n("span",{staticClass:"line-number"},[s._v("83")]),n("br"),n("span",{staticClass:"line-number"},[s._v("84")]),n("br"),n("span",{staticClass:"line-number"},[s._v("85")]),n("br"),n("span",{staticClass:"line-number"},[s._v("86")]),n("br"),n("span",{staticClass:"line-number"},[s._v("87")]),n("br"),n("span",{staticClass:"line-number"},[s._v("88")]),n("br"),n("span",{staticClass:"line-number"},[s._v("89")]),n("br"),n("span",{staticClass:"line-number"},[s._v("90")]),n("br"),n("span",{staticClass:"line-number"},[s._v("91")]),n("br"),n("span",{staticClass:"line-number"},[s._v("92")]),n("br"),n("span",{staticClass:"line-number"},[s._v("93")]),n("br"),n("span",{staticClass:"line-number"},[s._v("94")]),n("br"),n("span",{staticClass:"line-number"},[s._v("95")]),n("br"),n("span",{staticClass:"line-number"},[s._v("96")]),n("br"),n("span",{staticClass:"line-number"},[s._v("97")]),n("br"),n("span",{staticClass:"line-number"},[s._v("98")]),n("br"),n("span",{staticClass:"line-number"},[s._v("99")]),n("br"),n("span",{staticClass:"line-number"},[s._v("100")]),n("br"),n("span",{staticClass:"line-number"},[s._v("101")]),n("br"),n("span",{staticClass:"line-number"},[s._v("102")]),n("br"),n("span",{staticClass:"line-number"},[s._v("103")]),n("br"),n("span",{staticClass:"line-number"},[s._v("104")]),n("br"),n("span",{staticClass:"line-number"},[s._v("105")]),n("br"),n("span",{staticClass:"line-number"},[s._v("106")]),n("br"),n("span",{staticClass:"line-number"},[s._v("107")]),n("br"),n("span",{staticClass:"line-number"},[s._v("108")]),n("br"),n("span",{staticClass:"line-number"},[s._v("109")]),n("br"),n("span",{staticClass:"line-number"},[s._v("110")]),n("br"),n("span",{staticClass:"line-number"},[s._v("111")]),n("br"),n("span",{staticClass:"line-number"},[s._v("112")]),n("br"),n("span",{staticClass:"line-number"},[s._v("113")]),n("br"),n("span",{staticClass:"line-number"},[s._v("114")]),n("br"),n("span",{staticClass:"line-number"},[s._v("115")]),n("br"),n("span",{staticClass:"line-number"},[s._v("116")]),n("br"),n("span",{staticClass:"line-number"},[s._v("117")]),n("br"),n("span",{staticClass:"line-number"},[s._v("118")]),n("br"),n("span",{staticClass:"line-number"},[s._v("119")]),n("br"),n("span",{staticClass:"line-number"},[s._v("120")]),n("br"),n("span",{staticClass:"line-number"},[s._v("121")]),n("br"),n("span",{staticClass:"line-number"},[s._v("122")]),n("br"),n("span",{staticClass:"line-number"},[s._v("123")]),n("br"),n("span",{staticClass:"line-number"},[s._v("124")]),n("br"),n("span",{staticClass:"line-number"},[s._v("125")]),n("br"),n("span",{staticClass:"line-number"},[s._v("126")]),n("br"),n("span",{staticClass:"line-number"},[s._v("127")]),n("br"),n("span",{staticClass:"line-number"},[s._v("128")]),n("br"),n("span",{staticClass:"line-number"},[s._v("129")]),n("br"),n("span",{staticClass:"line-number"},[s._v("130")]),n("br"),n("span",{staticClass:"line-number"},[s._v("131")]),n("br"),n("span",{staticClass:"line-number"},[s._v("132")]),n("br"),n("span",{staticClass:"line-number"},[s._v("133")]),n("br"),n("span",{staticClass:"line-number"},[s._v("134")]),n("br"),n("span",{staticClass:"line-number"},[s._v("135")]),n("br"),n("span",{staticClass:"line-number"},[s._v("136")]),n("br"),n("span",{staticClass:"line-number"},[s._v("137")]),n("br"),n("span",{staticClass:"line-number"},[s._v("138")]),n("br"),n("span",{staticClass:"line-number"},[s._v("139")]),n("br"),n("span",{staticClass:"line-number"},[s._v("140")]),n("br"),n("span",{staticClass:"line-number"},[s._v("141")]),n("br"),n("span",{staticClass:"line-number"},[s._v("142")]),n("br"),n("span",{staticClass:"line-number"},[s._v("143")]),n("br"),n("span",{staticClass:"line-number"},[s._v("144")]),n("br"),n("span",{staticClass:"line-number"},[s._v("145")]),n("br"),n("span",{staticClass:"line-number"},[s._v("146")]),n("br"),n("span",{staticClass:"line-number"},[s._v("147")]),n("br"),n("span",{staticClass:"line-number"},[s._v("148")]),n("br"),n("span",{staticClass:"line-number"},[s._v("149")]),n("br"),n("span",{staticClass:"line-number"},[s._v("150")]),n("br"),n("span",{staticClass:"line-number"},[s._v("151")]),n("br"),n("span",{staticClass:"line-number"},[s._v("152")]),n("br"),n("span",{staticClass:"line-number"},[s._v("153")]),n("br"),n("span",{staticClass:"line-number"},[s._v("154")]),n("br"),n("span",{staticClass:"line-number"},[s._v("155")]),n("br"),n("span",{staticClass:"line-number"},[s._v("156")]),n("br"),n("span",{staticClass:"line-number"},[s._v("157")]),n("br"),n("span",{staticClass:"line-number"},[s._v("158")]),n("br"),n("span",{staticClass:"line-number"},[s._v("159")]),n("br"),n("span",{staticClass:"line-number"},[s._v("160")]),n("br"),n("span",{staticClass:"line-number"},[s._v("161")]),n("br"),n("span",{staticClass:"line-number"},[s._v("162")]),n("br"),n("span",{staticClass:"line-number"},[s._v("163")]),n("br"),n("span",{staticClass:"line-number"},[s._v("164")]),n("br"),n("span",{staticClass:"line-number"},[s._v("165")]),n("br"),n("span",{staticClass:"line-number"},[s._v("166")]),n("br"),n("span",{staticClass:"line-number"},[s._v("167")]),n("br"),n("span",{staticClass:"line-number"},[s._v("168")]),n("br"),n("span",{staticClass:"line-number"},[s._v("169")]),n("br"),n("span",{staticClass:"line-number"},[s._v("170")]),n("br"),n("span",{staticClass:"line-number"},[s._v("171")]),n("br"),n("span",{staticClass:"line-number"},[s._v("172")]),n("br"),n("span",{staticClass:"line-number"},[s._v("173")]),n("br"),n("span",{staticClass:"line-number"},[s._v("174")]),n("br"),n("span",{staticClass:"line-number"},[s._v("175")]),n("br"),n("span",{staticClass:"line-number"},[s._v("176")]),n("br"),n("span",{staticClass:"line-number"},[s._v("177")]),n("br"),n("span",{staticClass:"line-number"},[s._v("178")]),n("br"),n("span",{staticClass:"line-number"},[s._v("179")]),n("br"),n("span",{staticClass:"line-number"},[s._v("180")]),n("br"),n("span",{staticClass:"line-number"},[s._v("181")]),n("br"),n("span",{staticClass:"line-number"},[s._v("182")]),n("br"),n("span",{staticClass:"line-number"},[s._v("183")]),n("br"),n("span",{staticClass:"line-number"},[s._v("184")]),n("br"),n("span",{staticClass:"line-number"},[s._v("185")]),n("br"),n("span",{staticClass:"line-number"},[s._v("186")]),n("br"),n("span",{staticClass:"line-number"},[s._v("187")]),n("br"),n("span",{staticClass:"line-number"},[s._v("188")]),n("br"),n("span",{staticClass:"line-number"},[s._v("189")]),n("br"),n("span",{staticClass:"line-number"},[s._v("190")]),n("br"),n("span",{staticClass:"line-number"},[s._v("191")]),n("br"),n("span",{staticClass:"line-number"},[s._v("192")]),n("br"),n("span",{staticClass:"line-number"},[s._v("193")]),n("br"),n("span",{staticClass:"line-number"},[s._v("194")]),n("br"),n("span",{staticClass:"line-number"},[s._v("195")]),n("br"),n("span",{staticClass:"line-number"},[s._v("196")]),n("br"),n("span",{staticClass:"line-number"},[s._v("197")]),n("br"),n("span",{staticClass:"line-number"},[s._v("198")]),n("br"),n("span",{staticClass:"line-number"},[s._v("199")]),n("br"),n("span",{staticClass:"line-number"},[s._v("200")]),n("br"),n("span",{staticClass:"line-number"},[s._v("201")]),n("br"),n("span",{staticClass:"line-number"},[s._v("202")]),n("br"),n("span",{staticClass:"line-number"},[s._v("203")]),n("br"),n("span",{staticClass:"line-number"},[s._v("204")]),n("br"),n("span",{staticClass:"line-number"},[s._v("205")]),n("br"),n("span",{staticClass:"line-number"},[s._v("206")]),n("br"),n("span",{staticClass:"line-number"},[s._v("207")]),n("br"),n("span",{staticClass:"line-number"},[s._v("208")]),n("br"),n("span",{staticClass:"line-number"},[s._v("209")]),n("br"),n("span",{staticClass:"line-number"},[s._v("210")]),n("br"),n("span",{staticClass:"line-number"},[s._v("211")]),n("br"),n("span",{staticClass:"line-number"},[s._v("212")]),n("br"),n("span",{staticClass:"line-number"},[s._v("213")]),n("br"),n("span",{staticClass:"line-number"},[s._v("214")]),n("br"),n("span",{staticClass:"line-number"},[s._v("215")]),n("br"),n("span",{staticClass:"line-number"},[s._v("216")]),n("br"),n("span",{staticClass:"line-number"},[s._v("217")]),n("br"),n("span",{staticClass:"line-number"},[s._v("218")]),n("br"),n("span",{staticClass:"line-number"},[s._v("219")]),n("br"),n("span",{staticClass:"line-number"},[s._v("220")]),n("br"),n("span",{staticClass:"line-number"},[s._v("221")]),n("br"),n("span",{staticClass:"line-number"},[s._v("222")]),n("br"),n("span",{staticClass:"line-number"},[s._v("223")]),n("br"),n("span",{staticClass:"line-number"},[s._v("224")]),n("br"),n("span",{staticClass:"line-number"},[s._v("225")]),n("br"),n("span",{staticClass:"line-number"},[s._v("226")]),n("br"),n("span",{staticClass:"line-number"},[s._v("227")]),n("br"),n("span",{staticClass:"line-number"},[s._v("228")]),n("br"),n("span",{staticClass:"line-number"},[s._v("229")]),n("br"),n("span",{staticClass:"line-number"},[s._v("230")]),n("br"),n("span",{staticClass:"line-number"},[s._v("231")]),n("br"),n("span",{staticClass:"line-number"},[s._v("232")]),n("br")])]),n("h2",{attrs:{id:"_86、python控制台输出带颜色的文字方法"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_86、python控制台输出带颜色的文字方法"}},[s._v("#")]),s._v(" 86、python控制台输出带颜色的文字方法")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("#格式：　　设置颜色开始 ：\\033[显示方式;前景色;背景色m\n#说明：\n前景色            背景色           颜色\n---------------------------------------\n30                40              黑色\n31                41              红色\n32                42              绿色\n33                43              黃色\n34                44              蓝色\n35                45              紫红色\n36                46              青蓝色\n37                47              白色\n显示方式           意义\n-------------------------\n0                终端默认设置\n1                高亮显示\n4                使用下划线\n5                闪烁\n7                反白显示\n8                不可见\n \n#例子：\n\\033[1;31;40m    \x3c!--1-高亮显示 31-前景色红色  40-背景色黑色--\x3e\n\\033[0m          \x3c!--采用终端默认设置，即取消颜色设置--\x3e\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br")])]),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("例子\nprint('紫红字体 \\033[1;35m hello world \\033[0m!')\nprint('褐色背景绿色字体 \\033[1;32;43m hello world \\033[0m!')\nprint('\\033[1;33;44mhello world\\033[0m')\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("p",[n("img",{attrs:{src:"https://img-blog.csdnimg.cn/20200615143709116.png",alt:"在这里插入图片描述"}})]),s._v(" "),n("h2",{attrs:{id:"_87、控制台输出白色方框"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_87、控制台输出白色方框"}},[s._v("#")]),s._v(" 87、控制台输出白色方框")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("print('█')\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("h2",{attrs:{id:"_88、xadmin后台编辑多对多字段"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_88、xadmin后台编辑多对多字段"}},[s._v("#")]),s._v(" 88、xadmin后台编辑多对多字段")]),s._v(" "),n("p",[s._v("在models.py定义了多对多字段，想要在编辑时可以灵活使用这个字段的话，可以按以下方法设置：\nmodes.py")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('class Book(models.Model):\n    title = models.CharField(verbose_name="书名", max_length=32)\n    second_title = models.CharField(verbose_name="副标题", max_length=32, blank=True, null=True)\n    author = models.CharField(verbose_name="作者", max_length=32)\n    translator = models.CharField(verbose_name="译者", max_length=32, blank=True, null=True)\n    intro = models.TextField(verbose_name="描述")\n    pic = models.FileField(verbose_name="封面图片", max_length=64, upload_to=\'book_cover\', null=True, blank=True)\n    tags = models.ManyToManyField(Tags, verbose_name=\'书籍标签\', blank=True)\n    prizes = models.ManyToManyField(Prizes, verbose_name=\'获奖详情\', blank=True)\n    sump = models.IntegerField(verbose_name="收藏人数", default=0)\n    rate_num = models.IntegerField(verbose_name="评分人数", default=0)\n    num = models.IntegerField(verbose_name="浏览量", default=0)\n    published_time = models.DateField(blank=True, null=True, verbose_name=\'出版时间\')\n    create_time = models.DateTimeField(auto_now_add=True, verbose_name=\'创建时间\')\n\n    class Meta:\n        db_table = \'book\'\n        verbose_name = "图书"\n        verbose_name_plural = "图书"\n\n    def __str__(self):\n        return self.title\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br")])]),n("p",[s._v("adminx.py")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("# 书籍管理\nclass BookAdmin(object):\n    search_fields = ['title', 'author', 'intro']  # 检索字段\n    list_display = ['id', 'show_pic', 'title', 'second_title', 'author', 'translator', 'published_time', 'intro',\n                    'tags', 'prizes', 'num', 'sump', 'rate_num']  # 要显示的字段\n    list_filter = ['published_time', 'tags', 'prizes']  # 分组过滤的字段\n    ordering = ('id',)  # 设置默认排序字段，负号表示降序排序\n    list_per_page = 30  # 默认每页显示多少条记录，默认是100条\n    model_icon = 'fa fa-book'  # 左侧小图标\n    list_editable = ['title', 'author', 'intro', 'published_time']  # 可编辑字段\n    style_fields = {'tags': 'm2m_transfer', 'prizes': 'm2m_transfer'}  # 控制字段的显示样式\n    filter_horizontal = ('tags', 'prizes')  # 水平选择编辑多对多字段\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br")])]),n("p",[s._v("重点是设置style_fields 和filter_horizontal ，效果：")]),s._v(" "),n("p",[n("img",{attrs:{src:"https://img-blog.csdnimg.cn/20200621214122315.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xtX2lzX2Rj,size_16,color_FFFFFF,t_70",alt:"在这里插入图片描述"}})]),s._v(" "),n("h2",{attrs:{id:"_89、django后台通过按钮显示textfield字段内容"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_89、django后台通过按钮显示textfield字段内容"}},[s._v("#")]),s._v(" 89、Django后台通过按钮显示TextField字段内容")]),s._v(" "),n("p",[s._v("由于TextField字段类型内容可能很长，在后台显示时很占屏幕位置，可以通过按钮来控制显示，代码如下：\nmodels.py中定义了一个TextField字段类型：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('class Prizes(models.Model):\n    name = models.CharField(max_length=32, verbose_name="奖项")\n    intro = models.TextField(blank=True, null=True, verbose_name=\'简介\')\n\n    class Meta:\n        db_table = \'prizes\'\n        verbose_name = "奖项"\n        verbose_name_plural = "奖项"\n\n    def __str__(self):\n        return self.name\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br")])]),n("p",[s._v("这里使用xadmin作为后台管理框架，在adminx.py中代码如下：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('import xadmin\nfrom django.utils.safestring import mark_safe\nfrom xadmin import views\n\nfrom .models import *\n\n# 奖项管理\nclass PrizesAdmin(object):\n    search_fields = [\'name\']  # 检索字段\n    list_display = [\'id\', \'name\', \'show_intro\']\n    list_filter = [\'name\']\n    ordering = (\'id\',)\n\n    def show_intro(self, obj):\n        # 显示简介\n        if not obj.intro:\n            return mark_safe(\'\')\n        if len(obj.intro) < 20:\n            return mark_safe(obj.intro)\n\n        short_id = f\'{obj._meta.db_table}_short_text_{obj.id}\'\n        short_text_len = len(obj.intro) // 4\n        short_text = obj.intro[:short_text_len] + \'......\'\n        detail_id = f\'{obj._meta.db_table}_detail_text_{obj.id}\'\n        detail_text = obj.intro\n\n        text = """<style type="text/css">\n                        #%s,%s {padding:10px;border:1px solid green;} \n                  </style>\n                    <script type="text/javascript">\n\n                    function openShutManager(oSourceObj,oTargetObj,shutAble,oOpenTip,oShutTip,oShortObj){\n                        var sourceObj = typeof oSourceObj == "string" ? document.getElementById(oSourceObj) : oSourceObj;\n                        var targetObj = typeof oTargetObj == "string" ? document.getElementById(oTargetObj) : oTargetObj;\n                        var shortObj = typeof oShortObj == "string" ? document.getElementById(oShortObj) : oShortObj;\n                        var openTip = oOpenTip || "";\n                        var shutTip = oShutTip || "";\n                        if(targetObj.style.display!="none"){\n                           if(shutAble) return;\n                           targetObj.style.display="none";\n                           shortObj.style.display="block";\n                           if(openTip  &&  shutTip){\n                            sourceObj.innerHTML = shutTip; \n                           }\n                        } else {\n                           targetObj.style.display="block";\n                           shortObj.style.display="none";\n                           if(openTip  &&  shutTip){\n                            sourceObj.innerHTML = openTip; \n                           }\n                        }\n                        }\n                    <\/script>\n                    <p id="%s">%s</p>\n                    <p><a href="###" οnclick="openShutManager(this,\'%s\',false,\'点击关闭\',\'点击展开\',\'%s\')">点击展开</a></p>\n\n                    <p id="%s" style="display:none">\n                       %s\n                    </p>\n                    """ % (short_id, detail_id, short_id, short_text, detail_id, short_id, detail_id, detail_text)\n        return mark_safe(text)\n\n    show_intro.short_description = \'描述\'\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br"),n("span",{staticClass:"line-number"},[s._v("44")]),n("br"),n("span",{staticClass:"line-number"},[s._v("45")]),n("br"),n("span",{staticClass:"line-number"},[s._v("46")]),n("br"),n("span",{staticClass:"line-number"},[s._v("47")]),n("br"),n("span",{staticClass:"line-number"},[s._v("48")]),n("br"),n("span",{staticClass:"line-number"},[s._v("49")]),n("br"),n("span",{staticClass:"line-number"},[s._v("50")]),n("br"),n("span",{staticClass:"line-number"},[s._v("51")]),n("br"),n("span",{staticClass:"line-number"},[s._v("52")]),n("br"),n("span",{staticClass:"line-number"},[s._v("53")]),n("br"),n("span",{staticClass:"line-number"},[s._v("54")]),n("br"),n("span",{staticClass:"line-number"},[s._v("55")]),n("br"),n("span",{staticClass:"line-number"},[s._v("56")]),n("br"),n("span",{staticClass:"line-number"},[s._v("57")]),n("br"),n("span",{staticClass:"line-number"},[s._v("58")]),n("br"),n("span",{staticClass:"line-number"},[s._v("59")]),n("br"),n("span",{staticClass:"line-number"},[s._v("60")]),n("br"),n("span",{staticClass:"line-number"},[s._v("61")]),n("br"),n("span",{staticClass:"line-number"},[s._v("62")]),n("br"),n("span",{staticClass:"line-number"},[s._v("63")]),n("br")])]),n("p",[n("strong",[s._v("注意")]),s._v("：复制代码后需要做如下修改：")]),s._v(" "),n("p",[n("img",{attrs:{src:"https://img-blog.csdnimg.cn/20200815204246956.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xtX2lzX2Rj,size_16,color_FFFFFF,t_70#pic_center",alt:"在这里插入图片描述"}})]),s._v(" "),n("p",[s._v("一开始效果")]),s._v(" "),n("p",[n("img",{attrs:{src:"https://img-blog.csdnimg.cn/20200621230038819.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xtX2lzX2Rj,size_16,color_FFFFFF,t_70",alt:"在这里插入图片描述"}})]),s._v(" "),n("p",[s._v("点击展开效果："),n("img",{attrs:{src:"https://img-blog.csdnimg.cn/20200621230120177.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xtX2lzX2Rj,size_16,color_FFFFFF,t_70",alt:"在这里插入图片描述"}})]),s._v(" "),n("h2",{attrs:{id:"_90、前端判断上传的文件是否为图片且限制大小为300kb"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_90、前端判断上传的文件是否为图片且限制大小为300kb"}},[s._v("#")]),s._v(" 90、前端判断上传的文件是否为图片且限制大小为300kB")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('<!DOCTYPE html>\n<html lang="en-us">\n\n<body class="login">\n\n<input class="form-control input-lg" id="id_icon" name="icon" type="file" onchange="imgTypeSize(\'id_icon\',300)"\n<script type="text/javascript">\n    //判断是否为图片，若为图片，判断其大小是否大于0.3M\n    function imgTypeSize(FileId, maxsize) {\n        /*获取图片内容对象*/\n        var imgFile = document.getElementById(FileId).files[0];\n        if (imgFile.name == "") {\n            alert("请上传头像哦");\n            return false;\n        } else {\n            /*图片类型正则验证*/\n            var imgStr = /\\.(jpg|jpeg|png|bmp|BMP|JPG|PNG|JPEG)$/;\n            if (!imgStr.test(imgFile.name)) {\n                alert("文件不是图片类型");\n                return false;\n            } else {\n                /*图片大小*/\n                var imagSize = imgFile.size;\n                if (imagSize < (1024 * maxsize)) {\n                    return true;\n                } else {\n                    alert(imgFile.name + "大小不能超过" + maxsize + "kB");\n                    document.getElementById(FileId).value = ""\n                    return false;\n                }\n            }\n        }\n    }\n\n\n<\/script>\n\n</body>\n</html>\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br")])]),n("h2",{attrs:{id:"_91、form表单提交前验证"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_91、form表单提交前验证"}},[s._v("#")]),s._v(" 91、form表单提交前验证")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('<form action="" method="post" id="login-form" onsubmit="return toVaild()">\n\t<input class="form-control" id="id_account" name="account" type="text" placeholder="账号"/>\n\t<input class="form-control" id="id_password" name="password" type="password" placeholder="密码">\n<form>\n<script type="text/javascript">\n    document.getElementById(\'id_username\').focus()\n\n    function toVaild() {\n        var account = document.getElementById("id_account").value;\n        var password = document.getElementById("id_password").value;\n        if (account == "" || password == "") {\n            alert("请输入账号和密码");\n            return false;\n        } else {\n            return true;\n        }\n    }\n<\/script>\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br")])]),n("h2",{attrs:{id:"_92、有序字典"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_92、有序字典"}},[s._v("#")]),s._v(" 92、有序字典")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("import collections\n\nd1 = collections.OrderedDict()  # 创建一个有序字典\nd1['a'] = 'A'\nd1['b'] = 'B'\nd1['c'] = 'C'\nd1['d'] = 'D'\nfor k, v in d1.items():\n    print(k, v)\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br")])]),n("h2",{attrs:{id:"_93、python在windows系统下实现tts-文字转语音"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_93、python在windows系统下实现tts-文字转语音"}},[s._v("#")]),s._v(" 93、Python在Windows系统下实现TTS（文字转语音）")]),s._v(" "),n("p",[s._v("导入包：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('pip install pypiwin32\n\nimport win32com.client\nspk = win32com.client.Dispatch("SAPI.SpVoice")\nspk.Speak(u"my name is ldc,what is your name")\nspk.Speak(u"大家好")\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br")])]),n("h2",{attrs:{id:"_94、定义一个简单闹钟"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_94、定义一个简单闹钟"}},[s._v("#")]),s._v(" 94、定义一个简单闹钟")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('# pip install pypiwin32 -i https://pypi.python.org/simple\nimport win32com.client\nimport time \nimport winsound\n\nspk = win32com.client.Dispatch("SAPI.SpVoice")\n# 定义闹钟时间\nclocktime = [[19, 19], [11, 10], [12, 10], [18, 47]]  \nruninghour = 1  # 定义运行时间\ntimes = runinghour * 3600  # 次数\nprint(times)\nfor i in range(1, times):\n    time_now = [time.localtime(time.time()).tm_hour, time.localtime(time.time()).tm_min]\n    if time_now in clocktime:\n        print(time_now)\n        winsound.Beep(1000, 1000)\n        spk.Speak(u"快去看下饭好了没有？")\n    time.sleep(60)  # 每分钟对比一次时间\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br")])]),n("h2",{attrs:{id:"_95、根据年月获取当月天数"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_95、根据年月获取当月天数"}},[s._v("#")]),s._v(" 95、根据年月获取当月天数")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('def get_month_days(year, month):\n    """\n    根据年份，月份信息显示此月份天数\n    :param year: 年份：\n    :param month: 月份（1～12）：\n    :return: 当月天数\n    """\n    if month >12 or month <= 0:\n        return -1\n    if month == 2:\n        return 29 if year % 4 == 0 and year % 100 != 0 or year % 400 == 0 else 28\n\n    if month in (4, 6, 9, 11):\n        return 30\n    else:\n        return 31\n\na = \'2020-04\'.split(\'-\')\nyear = int(a[0])\nmonth = int(a[1])\nprint(get_month_days(year,month))\n\n输出：\n30\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br")])]),n("h2",{attrs:{id:"_96、django获取favicon-ico图标"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_96、django获取favicon-ico图标"}},[s._v("#")]),s._v(" 96、Django获取favicon.ico图标")]),s._v(" "),n("p",[s._v("制作一个ico文件，使用PS或者某些在线生成ico的网站")]),s._v(" "),n("p",[s._v("将此文件命名为“favicon.ico”后放在static/下")]),s._v(" "),n("p",[n("img",{attrs:{src:"https://img-blog.csdnimg.cn/20200805104730363.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xtX2lzX2Rj,size_16,color_FFFFFF,t_70",alt:"在这里插入图片描述"}})]),s._v(" "),n("p",[s._v("在urls.py中定义路由：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("from django.urls import path\nfrom django.views.generic import RedirectView\n\nurlpatterns = [\n\t# 访问favicon.ico 网站图标\n    path(\"favicon.ico\",RedirectView.as_view(url='static/favicon.ico')),\n\n]\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br")])]),n("h2",{attrs:{id:"_97、django-静态文件配置"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_97、django-静态文件配置"}},[s._v("#")]),s._v(" 97、django 静态文件配置")]),s._v(" "),n("p",[s._v("settings.py")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("    STATIC_URL = '/static/'\n    # 添加静态资源路由地址\n    STATICFILES_DIRS = [\n        os.path.join(BASE_DIR, 'static'),\n    \n    ]\n    # 使用python manage.py collectstatic收集静态文件时时使用STATIC_ROOT\n    # STATIC_ROOT = os.path.join(BASE_DIR, 'static')\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br")])]),n("p",[s._v("urls.py")]),s._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",[n("code",[s._v("from django.urls import path, re_path\nfrom django.views.generic import RedirectView\nfrom django.views.static import serve\n\nfrom '你的项目名称' import settings\nurlpatterns = [\n   \n    path(\"favicon.ico\",RedirectView.as_view(url='static/favicon.ico')),\n    re_path('static/(?P<path>.*)$', serve, {'document_root': settings.STATICFILES_DIRS[0]}),\n    \n]\n")])])]),n("h2",{attrs:{id:"_98、django-jsonresponse返回中文时显示unicode编码-u67e5-u8be2"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_98、django-jsonresponse返回中文时显示unicode编码-u67e5-u8be2"}},[s._v("#")]),s._v(" 98、django JsonResponse返回中文时显示unicode编码（\\u67e5\\u8be2）")]),s._v(" "),n("p",[s._v("原因\n这个unicode编码，是python3默认返回的编码。")]),s._v(" "),n("p",[s._v("解决方案\nJsonResponse里面有个参数json_dumps_params，设置为json_dumps_params={‘ensure_ascii’:False}即可。")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("    data = {'msg': '创建成功',}\n    return JsonResponse(data=data, json_dumps_params={'ensure_ascii': False})\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("h2",{attrs:{id:"_99、获取当前时间月份的首日与最后一天"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_99、获取当前时间月份的首日与最后一天"}},[s._v("#")]),s._v(" 99、获取当前时间月份的首日与最后一天")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("import calendar\n\ndef get_month_start_and_end(date=datetime.datetime.now()):\n    \"\"\"\n    获取当前时间的月份首日与最后一天\n    :param date:\n    :return: (首日，最后一天)\n    \"\"\"\n    year, month = str(date).split('-')[0], str(date).split('-')[1]\n    end = calendar.monthrange(int(year), int(month))[1]\n    return f'{year}-{month}-01', f'{year}-{month}-{end}'\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br")])]),n("h2",{attrs:{id:"_100、xadmin后台批量操作"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_100、xadmin后台批量操作"}},[s._v("#")]),s._v(" 100、xadmin后台批量操作")]),s._v(" "),n("p",[s._v("adminx.py")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("import xadmin\nfrom django.db.models import  Sum\nfrom xadmin.plugins.actions import BaseActionView\n\nclass MyCountFeeAction(BaseActionView):\n    \"\"\"\n        用户余额统计\n        \"\"\"\n    action_name = \"countuserfee\"  #: 相当于这个 Action 的唯一标示, 尽量用比较针对性的名字\n    description = u'统计用户总余额'  #: 描述, 出现在 Action 菜单中, 可以使用 ``%(verbose_name_plural)s`` 代替 Model 的名字.\n    model_perm = 'view'  # 权限\n\n    def do_action(self, queryset):\n        all_balance = MallUser.objects.all().aggregate(Sum('balance'))\n        return HttpResponse(f'用户总余额{all_balance}')\nclass UserAdmin(object):\n    \"\"\"用户信息管理\"\"\"\n    list_display = ['username', 'balance', 'status', 'addtime']\n    search_fields = ['username', ]\n    list_filter = ['status', 'addtime']\n    list_per_page = 30  # 默认每页数量\n    model_icon = 'fa fa-user'\n    list_editable = ['status']\n    ordering = ['-addtime']\n    actions = [ MyCountFeeAction]  # 添加批量选择操作\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br")])]),n("p",[n("img",{attrs:{src:"https://img-blog.csdnimg.cn/20200812233442373.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xtX2lzX2Rj,size_16,color_FFFFFF,t_70#pic_center",alt:"在这里插入图片描述"}})]),s._v(" "),n("h2",{attrs:{id:"_101、xadmin过滤器外键显示特定值-比如只能过滤自己与超级管理员定义的数据"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_101、xadmin过滤器外键显示特定值-比如只能过滤自己与超级管理员定义的数据"}},[s._v("#")]),s._v(" 101、xadmin过滤器外键显示特定值（比如只能过滤自己与超级管理员定义的数据）")]),s._v(" "),n("p",[s._v("首先，修改xadmin源码，修改xadmin/filters.py,在401行，做如下修改，")]),s._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",[n("code",[s._v("把self.lookup_choices = field.get_choices(include_blank=False)\n改为：\n\n# 调用自定义的方法\nif hasattr(model_admin, '{field}_choices'.format(field=field.name)):\n        self.lookup_choices = getattr(model_admin, '{field}_choices'.format(field=field.name))(field, request,params, model,model_admin,field_path)\n    else:\n        self.lookup_choices = field.get_choices(include_blank=False)\n")])])]),n("p",[s._v("如图:")]),s._v(" "),n("p",[n("img",{attrs:{src:"https://img-blog.csdnimg.cn/20200812234011656.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xtX2lzX2Rj,size_16,color_FFFFFF,t_70#pic_center",alt:"在这里插入图片描述"}})]),s._v(" "),n("p",[s._v("然后，在adminx.py中定义过滤的方法：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("import xadmin\nfrom django.db.models import  Q, Sum\nfrom xadmin.plugins.actions import BaseActionView\n\nclass MeasurePointAdmin(object):\n    # search_fields = ['user__name', 'user__account']  # 检索字段\n    list_display = ['num', 'elevation', 'correct_num', 'cumulative_amount']\n    list_filter = ['user', 'is_default', 'create_time']  # 分组过滤的字段\n    list_editable = ['num', 'elevation', 'correct_num', 'cumulative_amount']\n    ordering = ('id',)  # 设置默认排序字段，负号表示降序排序\n    list_per_page = 30  # 默认每页显示多少条记录，默认是100条\n    model_icon = 'fa fa-users'  # 左侧小图标\n    readonly_fields = ['user', 'is_default']\n    import_excel = True\n    actions = [MyCountFeeAction]\n\t\n\t# 定义的函数名必须是  字段名_choices\n    def user_choices(self, field, request, params, model, model_admin, field_path):\n        # 超级用户不做控制\n        if self.request.user.is_superuser:\n            return field.get_choices(include_blank=False)\n\n        # 过滤器只显示自己与超级管理员\n        user_lst = field.related_model._default_manager.filter(Q(id=self.request.user.id) | Q(is_superuser=True))\n        # 返回格式 [('pk','标题'),]\n        return [(user.id, user.username) for user in user_lst]\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br")])]),n("p",[s._v("效果:")]),s._v(" "),n("p",[n("img",{attrs:{src:"https://img-blog.csdnimg.cn/2020081223440761.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xtX2lzX2Rj,size_16,color_FFFFFF,t_70#pic_center",alt:"在这里插入图片描述"}})]),s._v(" "),n("h2",{attrs:{id:"_102、django中的csrf局部禁用"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_102、django中的csrf局部禁用"}},[s._v("#")]),s._v(" 102、Django中的CSRF局部禁用")]),s._v(" "),n("p",[s._v("为了避免没有csrf token而产生的403的forbidden错误，可以使用csrf_exempt装饰器来处理POST、GET请求的View, 这种方式是CSRF局部禁用。")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("from django.utils.decorators import method_decorator\nfrom django.views.decorators.csrf import csrf_exempt\n\n@method_decorator(csrf_exempt)\ndef update_data(request):\n    if request.method == 'POST':\n    \tpass\n\telif request.method == 'GET':\n    \tpass\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br")])]),n("h2",{attrs:{id:"_103、使用python命令创建django项目"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_103、使用python命令创建django项目"}},[s._v("#")]),s._v(" 103、使用python命令创建django项目")]),s._v(" "),n("p",[s._v("创建django项目\n方式一：直接打开pycharm创建，选择file->new project->django\n方式二：通过命令创建\n先创建虚拟环境：python -m venv django_venv\n然后导入django库：pip install django -i https://pypi.tuna.tsinghua.edu.cn/simple\n最后使用命令创建：django-admin startproject my_django_project")]),s._v(" "),n("h2",{attrs:{id:"_104、-二维列表、二维数组行求和与列求和"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_104、-二维列表、二维数组行求和与列求和"}},[s._v("#")]),s._v(" 104、 二维列表、二维数组行求和与列求和")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("import pandas as pd\nfrom functools import reduce\n\n# 二维数组，对列和行求和\na = [\n    ['', 0, '', 1, 4.1],\n    ['', 0, '', '', 4],\n    ['123', 0, '', 3, 4, 6,7],\n]\n\n\ndef aa(x, y):\n    x = 0 if isinstance(x, str) else x\n    y = 0 if isinstance(y, str) else y\n    return x + y\n\n# 对行求和\nrow_sum = [reduce(aa, i) for i in a]\n# 对列求和，只能处理相同长度的子元素\ncolumn_sum_1 = [reduce(aa, i) for i in zip(*a)]\n# 对列求和，可以处理不同长度的子元素\ncolumn_sum_2 = list(dict(pd.DataFrame(a).fillna(0).apply(lambda x: '' if any(isinstance(d, str) for d in x) else round(x.sum(), 2))).values())\nprint('行求和：{}\\r\\n列求和(相同长度)：{}\\r\\n列求和：{}'.format(row_sum, column_sum_1, column_sum_2))\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br")])]),n("p",[s._v("输出：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("行求和：[5.1, 4, 20]\n列求和(相同长度)：[0, 0, 0, 4, 12.1]\n列求和：['', 0, '', '', 12.1, 6.0, 7.0]\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("h2",{attrs:{id:"_105、获取时间字符串的月份数"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_105、获取时间字符串的月份数"}},[s._v("#")]),s._v(" 105、获取时间字符串的月份数")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("from datetime import datetime\n    \ndef get_months(start_month_str, end_month_str):\n    '''\n    # 获取时间字符串中的月份数\n    :param start_month_str: 开始字符串\n    :param end_month_str: 结束字符串\n    :return: 月份数\n    '''\n\n    end_month_date = datetime.strptime(end_month_str, '%Y-%m')\n    start_month_date = datetime.strptime(start_month_str, '%Y-%m')\n    end_year, end_month = end_month_date.year, end_month_date.month\n    start_year, start_month = start_month_date.year, start_month_date.month\n\n    return (end_year - start_year) *12 + (end_month - start_month) + 1\n\n\nend_month_str = '2021-02'\nstart_month_str = '2020-07'\nprint(get_months(start_month_str, end_month_str))\n\n输出：\n\n8\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br")])]),n("h2",{attrs:{id:"_106、字符串不足补零"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_106、字符串不足补零"}},[s._v("#")]),s._v(" 106、字符串不足补零")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("print('hello world'.zfill(15)) # 补0\nprint('hello world'.rjust(15)) # 右对齐，补空格\nprint('hello world'.ljust(15)) # 左对齐，补空格\n\n输出：\n\n0000hello world\n    hello world\nhello world  \n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br")])]),n("h2",{attrs:{id:"_107、时间戳转字符串日期"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_107、时间戳转字符串日期"}},[s._v("#")]),s._v(" 107、时间戳转字符串日期")]),s._v(" "),n("div",{staticClass:"language-python line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-python"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" time\nt1 "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" time"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("time"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("print")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("t1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("print")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("time"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("strftime"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"%Y-%m-%d %H:%M:%S"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" time"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("localtime"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("t1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n输出：\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1621741567.082192")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("05")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("23")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("46")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("07")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br")])]),n("p",[s._v("使用函数：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('# !/usr/bin/python\n# -*- coding: utf-8 -*-\n\n"""\n@contact: 微信 1257309054\n@file: 时间戳转日期.py\n@time: 2022/6/27 17:16\n@author: LDC\n"""\nimport time\nimport datetime\n\n\n# 正确10位长度的时间戳可精确到秒，11-14位长度则是包含了毫秒\ndef int_to_datetime(intValue):\n    if len(str(intValue)) == 10:\n        # 精确到秒\n        timeValue = time.localtime(intValue)\n        tempDate = time.strftime("%Y-%m-%d %H:%M:%S", timeValue)\n        datetimeValue = datetime.datetime.strptime(tempDate, "%Y-%m-%d %H:%M:%S")\n    elif 10 < len(str(intValue)) and len(str(intValue)) < 15:\n        # 精确到毫秒\n        k = len(str(intValue)) - 10\n        timetamp = datetime.datetime.fromtimestamp(intValue / (1 * 10 ** k))\n        datetimeValue = timetamp.strftime("%Y-%m-%d %H:%M:%S.%f")\n    else:\n        return -1\n    return datetimeValue\n\n\ntime1 = 1656321420\ntime2 = 1656321086560\nprint(int_to_datetime(time1))\nprint(int_to_datetime(time2))\n\n\'\'\'\n输出：\n2022-06-27 17:17:00\n2022-06-27 17:11:26.560000\n\'\'\'\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br")])]),n("h2",{attrs:{id:"_108、列表转字符串"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_108、列表转字符串"}},[s._v("#")]),s._v(" 108、列表转字符串")]),s._v(" "),n("div",{staticClass:"language-python line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-python"}},[n("code",[s._v("a "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("print")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("','")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("join"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("map")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("str")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("a"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n输出：\n`"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("`\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("h2",{attrs:{id:"_109、pip国内镜像源"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_109、pip国内镜像源"}},[s._v("#")]),s._v(" 109、pip国内镜像源")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("pip install 库名 -i https://pypi.tuna.tsinghua.edu.cn/simple\n\n\n清华：-i https://pypi.tuna.tsinghua.edu.cn/simple\n\n阿里云：-i http://mirrors.aliyun.com/pypi/simple/\n\n中国科技大学 -i https://pypi.mirrors.ustc.edu.cn/simple/\n\n华中理工大学：-i http://pypi.hustunique.com/\n\n山东理工大学：-i http://pypi.sdutlinux.org/ \n\n豆瓣：-i http://pypi.douban.com/simple/\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br")])]),n("h2",{attrs:{id:"_110、python把时间字符串转换成刚刚、1天前、3个月前、1年前"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_110、python把时间字符串转换成刚刚、1天前、3个月前、1年前"}},[s._v("#")]),s._v(" 110、python把时间字符串转换成刚刚、1天前、3个月前、1年前")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("import datetime\nimport time\n\n\ndef date_interval(date_str):\n    '''\n    获取时间间隔\n    1分钟前，2分钟前，10分钟前，1小时前，2小时前，1天前，2天前，3天前，1个月前，3个月前，1年前，3年前\n    :param date_str: 时间字符串\n    :return: 字符串\n    '''\n    date_str = time.strptime(date_str, '%Y-%m-%d %H:%M:%S')\n    # 将时间元组转换为时间戳\n    t = time.mktime(date_str)\n\n    # 当前时间\n    seconds = time.time() - t\n\n    years = int(seconds // (60 * 60 * 24 * 365))\n    if years:\n        return '{}年前'.format(years)\n    months = int(seconds // (60 * 60 * 24 * 30))\n    if months:\n        return '{}月前'.format(months)\n    days = int(seconds // (60 * 60 * 24))\n    if days:\n        return '{}天前'.format(days)\n    hours = int(seconds // (60 * 60))\n    if hours:\n        return '{}小时前'.format(hours)\n    minutes = int(seconds // (60))\n    if minutes:\n        return '{}分钟前'.format(minutes)\n    return '刚刚'\n\n\nif __name__ == '__main__':\n    date1 = '2019-07-10 15:27:51'\n    date2 = '2021-07-10 15:27:51'\n    date3 = '2021-08-10 15:27:51'\n    date4 = '2021-08-12 11:01:51'\n    date5 = datetime.datetime.now() + datetime.timedelta(seconds=-3)\n    date5 = date5.strftime('%Y-%m-%d %H:%M:%S')\n    print(date_interval(date1))\n    print(date_interval(date2))\n    print(date_interval(date3))\n    print(date_interval(date4))\n    print(date_interval(date5))\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br"),n("span",{staticClass:"line-number"},[s._v("44")]),n("br"),n("span",{staticClass:"line-number"},[s._v("45")]),n("br"),n("span",{staticClass:"line-number"},[s._v("46")]),n("br"),n("span",{staticClass:"line-number"},[s._v("47")]),n("br"),n("span",{staticClass:"line-number"},[s._v("48")]),n("br")])]),n("h2",{attrs:{id:"_111、django使用orm执行sql语句"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_111、django使用orm执行sql语句"}},[s._v("#")]),s._v(" 111、Django使用ORM执行sql语句")]),s._v(" "),n("p",[s._v("通过raw函数执行")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("alarm_datas = gsm.AlertMessage.objects.raw('''\n                select am_all.id, am_all.sensor_number\n                    FROM alert_message as am_all\n                    where \n                        am_all.real='1'\n                        and am_all.is_show=1\n                    order by am_all.alarm_level desc\n                ''')\nfor ad in alarm_datas:\n\tprint(ad.sensor_number)\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br")])]),n("h2",{attrs:{id:"_112、django通过变量字段获取数据"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_112、django通过变量字段获取数据"}},[s._v("#")]),s._v(" 112、Django通过变量字段获取数据")]),s._v(" "),n("p",[s._v("通过方法"),n("code",[s._v("__getattribute__")]),s._v("来获取")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("alert_messages = AlertMessage.objects.filter(real=0)\nam_fields = ['id', 'real', 'name']\nfor am in alert_messages:\n\tfor i in range(len(am_fields)):\n\t\tprint(am_fields[i], am.__getattribute__(am_fields[i]))\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br")])]),n("h2",{attrs:{id:"_113、django查询变量字段、更新变量字段"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_113、django查询变量字段、更新变量字段"}},[s._v("#")]),s._v(" 113、Django查询变量字段、更新变量字段")]),s._v(" "),n("p",[s._v("通过"),n("code",[s._v("**{变量名:值}")]),s._v("来操作")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("field = 'device_code'\n# 查询\ndevice_infos = gsm.DeviceInfo.objects.filter(**{field: '012'})\n# 更新\ngsm.DeviceInfo.objects.filter(device_code='012').update(**{field : '0'})\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br")])]),n("h2",{attrs:{id:"_114、vue生成dist文件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_114、vue生成dist文件"}},[s._v("#")]),s._v(" 114、vue生成dist文件")]),s._v(" "),n("p",[s._v("安装npm，到"),n("a",{attrs:{href:"https://nodejs.org/en/download/",target:"_blank",rel:"noopener noreferrer"}},[s._v("官网下载"),n("OutboundLink")],1),s._v("\n在vue项目下打开cmd，输入命令")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("npm run build\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("如果报错，npm ERR! missing script: build，\n则使用以下命令")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("npm run build:prod\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("具体看package.json")]),s._v(" "),n("p",[n("img",{attrs:{src:"https://img-blog.csdnimg.cn/eff15dcd4c1d499f9641d0ac25c09bc0.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5Lic5pyo5pyI,size_20,color_FFFFFF,t_70,g_se,x_16",alt:"在这里插入图片描述"}})]),s._v(" "),n("h2",{attrs:{id:"_115、python获取电脑磁盘、cpu、内存使用情况"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_115、python获取电脑磁盘、cpu、内存使用情况"}},[s._v("#")]),s._v(" 115、python获取电脑磁盘、CPU、内存使用情况")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("import psutil\n#  pip install psutil\n\n# 获取本机磁盘使用率和剩余空间G信息\ndef get_disk_info():\n    # 循环磁盘分区\n    content = \"\"\n    for disk in psutil.disk_partitions():\n        # 读写方式 光盘 or 有效磁盘类型\n        if 'cdrom' in disk.opts or disk.fstype == '':\n            continue\n        disk_name_arr = disk.device.split(':')\n        disk_name = disk_name_arr[0]\n        disk_info = psutil.disk_usage(disk.device)\n        # 磁盘剩余空间，单位G\n        free_disk_size = disk_info.free//1024//1024//1024\n        # 当前磁盘使用率和剩余空间G信息\n        info = \"{}盘使用率：{}%%， 剩余空间：{}G \".format(disk_name, str(disk_info.percent), free_disk_size)\n        # 拼接多个磁盘的信息\n        content = content + info\n    print(content)\n\n# cpu信息\ndef get_cpu_info():\n    cpu_percent = psutil.cpu_percent(interval=1)\n    cpu_info = \"CPU使用率：%i%%\" % cpu_percent\n    print(cpu_info)\n\n# 内存信息\ndef get_memory_info():\n    virtual_memory = psutil.virtual_memory()\n    used_memory = virtual_memory.used/1024/1024/1024\n    free_memory = virtual_memory.free/1024/1024/1024\n    memory_percent = virtual_memory.percent\n    memory_info = \"内存使用：%0.2fG，使用率%0.1f%%，剩余内存：%0.2fG\" % (used_memory, memory_percent, free_memory)\n    print(memory_info)\n\nif __name__ == '__main__':\n    get_disk_info()\n    get_cpu_info()\n    get_memory_info()\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br")])]),n("h2",{attrs:{id:"_116、max比较字典列表"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_116、max比较字典列表"}},[s._v("#")]),s._v(" 116、max比较字典列表")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("'''\n使用max函数比较字典列表对象\n需求：找出用户组最大id的字典\n'''\ndef com_id(f):\n    '''\n    比较用用户ids列表\n    :param f: 字典\n    :return: 返回最大的用户id\n    '''\n    return max(f['user_ids'])\n\nfriends_added = [\n        {'user_ids': [1, 2], 'create_at': '2020-01-01'},\n        {'user_ids': [3, 6], 'create_at': '2020-01-02'},\n        {'user_ids': [2, 1], 'create_at': '2020-02-02'},\n        {'user_ids': [4, 1], 'create_at': '2020-02-02'},\n    ]\n# max函数中使用key参数，指定自定义函数来比较\nitem = max(friends_added, key=com_id)\nitem_1 = max(friends_added, key=lambda f: max(f['user_ids'])) # com_id可以转成lambda函数\nprint(item)\nprint(item_1)\n\n\n输出：\n\n{'user_ids': [3, 6], 'create_at': '2020-01-02'}\n{'user_ids': [3, 6], 'create_at': '2020-01-02'}\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br")])]),n("h2",{attrs:{id:"_117、django查询表的具体字段"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_117、django查询表的具体字段"}},[s._v("#")]),s._v(" 117、django查询表的具体字段")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("ExampleModel.objects.values('id', 'username')\n# 返回的结果是QuerySet， 里面的元素是dict格式\n# [{'id':1, 'username': 'Austin'}, {'id':2, 'username':'Sam'}, ...]\n# 相当于SQL中的SELECT id, username FROM ......, \n# 只返回对应属性（字段）的值\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("h2",{attrs:{id:"_118、mysql查询数据添加自增序号"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_118、mysql查询数据添加自增序号"}},[s._v("#")]),s._v(" 118、MySQL查询数据添加自增序号")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("set @i = 0;\nselect waveform, '沿桥风吹' as label ,(@i:=@i+1) xh from alert_message where is_real=1 and node_id=138\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("h2",{attrs:{id:"_119、mysql-时间截取年月日"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_119、mysql-时间截取年月日"}},[s._v("#")]),s._v(" 119、MySQL 时间截取年月日")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("select id,\n\t\t\taddtime, \n\t\t\tdate_format(addtime,'%Y-%m-%d') as short_time \n\tfrom alert_message \n\twhere date_format(addtime,'%Y-%m-%d') = '2022-03-13'\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("p",[n("img",{attrs:{src:"https://img-blog.csdnimg.cn/37cec67fa1e1458f9aba1b745600a493.png",alt:"在这里插入图片描述"}})]),s._v(" "),n("h2",{attrs:{id:"_120、-列表取奇数下标值"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_120、-列表取奇数下标值"}},[s._v("#")]),s._v(" 120、 列表取奇数下标值")]),s._v(" "),n("div",{staticClass:"language-python line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-python"}},[n("code",[s._v("list1"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'a'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'b'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'c'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'d'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'e'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("print")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'奇数下标值'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("list1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n输出：\n\n奇数下标值 "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'b'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'d'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br")])]),n("h2",{attrs:{id:"_121、列表取偶数下标值"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_121、列表取偶数下标值"}},[s._v("#")]),s._v(" 121、列表取偶数下标值")]),s._v(" "),n("div",{staticClass:"language-python line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-python"}},[n("code",[s._v("list1"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'a'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'b'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'c'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'d'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'e'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("print")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'偶数下标值'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("list1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n偶数下标值 "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'a'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'c'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'e'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("h2",{attrs:{id:"_122、列表相同元素分类、分组"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_122、列表相同元素分类、分组"}},[s._v("#")]),s._v(" 122、列表相同元素分类、分组")]),s._v(" "),n("div",{staticClass:"language-python line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-python"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" itertools\n\ndata "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'a'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'a'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\na "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("list")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("group"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" key"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" group "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" itertools"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("groupby"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("data"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("print")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("a"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n输出：\n\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'a'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'a'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br")])]),n("h2",{attrs:{id:"_123、ubuntu切换用户"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_123、ubuntu切换用户"}},[s._v("#")]),s._v(" 123、ubuntu切换用户")]),s._v(" "),n("p",[s._v("1）从user用户切换到root用户\nsudo su\n2）从root用户切回user用户\nsu user (user是你自己安装时候的用户名)，或是直接输入exit，也可Ctrl+D组合键推出")]),s._v(" "),n("h2",{attrs:{id:"_124、numpy二维数组获取某一列"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_124、numpy二维数组获取某一列"}},[s._v("#")]),s._v(" 124、numpy二维数组获取某一列")]),s._v(" "),n("div",{staticClass:"language-python line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-python"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" numpy "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" np\n\na "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("13.2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("14.8")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("15.9")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("16.10")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("16.11")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("17.12")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\na_np "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" np"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("array"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("a"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 把二维列表转成numpy数组")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("print")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'第一行'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" a_np"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("tolist"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 获取第一行")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("print")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'第一列'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" a_np"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("tolist"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 获取第一列")]),s._v("\n\n输出：\n\n第一行 "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4.0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("5.0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6.0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n第一列 "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("7.0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("13.2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br")])])])}),[],!1,null,null,null);n.default=t.exports}}]);